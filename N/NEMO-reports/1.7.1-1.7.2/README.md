# Comparing `tmp/NEMO_reports-1.7.1-py3-none-any.whl.zip` & `tmp/NEMO_reports-1.7.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,31 +1,31 @@
-Zip file size: 46705 bytes, number of entries: 29
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-16 00:06 NEMO_reports/__init__.py
--rw-r--r--  2.0 unx       41 b- defN 24-Apr-16 00:06 NEMO_reports/app_settings.py
--rw-r--r--  2.0 unx      486 b- defN 24-Apr-16 00:06 NEMO_reports/apps.py
--rw-r--r--  2.0 unx     1682 b- defN 24-Apr-16 00:06 NEMO_reports/customizations.py
--rw-r--r--  2.0 unx     1620 b- defN 24-Apr-16 00:06 NEMO_reports/urls.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-16 00:06 NEMO_reports/migrations/__init__.py
--rw-rw-rw-  2.0 unx      243 b- defN 24-Apr-16 00:06 NEMO_reports/static/NEMO_reports/NEMO_reports.css
--rw-rw-rw-  2.0 unx     7659 b- defN 24-Apr-16 00:06 NEMO_reports/static/NEMO_reports/daterangepicker.css
--rw-rw-rw-  2.0 unx    66305 b- defN 24-Apr-16 00:06 NEMO_reports/static/NEMO_reports/daterangepicker.js
--rw-rw-rw-  2.0 unx     2346 b- defN 24-Apr-16 00:06 NEMO_reports/templates/NEMO_reports/report_active_users.html
--rw-rw-rw-  2.0 unx     7103 b- defN 24-Apr-16 00:06 NEMO_reports/templates/NEMO_reports/report_base.html
--rw-rw-rw-  2.0 unx     1703 b- defN 24-Apr-16 00:06 NEMO_reports/templates/NEMO_reports/report_facility_usage.html
--rw-rw-rw-  2.0 unx     2782 b- defN 24-Apr-16 00:06 NEMO_reports/templates/NEMO_reports/report_new_users.html
--rw-rw-rw-  2.0 unx      908 b- defN 24-Apr-16 00:06 NEMO_reports/templates/NEMO_reports/reports.html
--rw-rw-rw-  2.0 unx      269 b- defN 24-Apr-16 00:06 NEMO_reports/templates/base/navbar.html
--rw-rw-rw-  2.0 unx      138 b- defN 24-Apr-16 00:06 NEMO_reports/templates/base/navbar_reports.html
--rw-rw-rw-  2.0 unx     4688 b- defN 24-Apr-16 00:06 NEMO_reports/templates/customizations/customizations_reports.html
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-16 00:06 NEMO_reports/views/__init__.py
--rw-r--r--  2.0 unx    18987 b- defN 24-Apr-16 00:06 NEMO_reports/views/reporting.py
--rw-r--r--  2.0 unx    15017 b- defN 24-Apr-16 00:06 NEMO_reports/views/reporting_facilily_usage.py
--rw-r--r--  2.0 unx    12381 b- defN 24-Apr-16 00:06 NEMO_reports/views/reporting_invoice_charges.py
--rw-r--r--  2.0 unx    16324 b- defN 24-Apr-16 00:06 NEMO_reports/views/reporting_invoice_item_charges.py
--rw-r--r--  2.0 unx    24248 b- defN 24-Apr-16 00:06 NEMO_reports/views/reporting_new_user_activities.py
--rw-r--r--  2.0 unx    15375 b- defN 24-Apr-16 00:06 NEMO_reports/views/reporting_unique_user_prj_acc.py
--rw-rw-rw-  2.0 unx     1074 b- defN 24-Apr-16 00:06 NEMO_reports-1.7.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     2116 b- defN 24-Apr-16 00:06 NEMO_reports-1.7.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-16 00:06 NEMO_reports-1.7.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       13 b- defN 24-Apr-16 00:06 NEMO_reports-1.7.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2817 b- defN 24-Apr-16 00:06 NEMO_reports-1.7.1.dist-info/RECORD
-29 files, 206417 bytes uncompressed, 42017 bytes compressed:  79.6%
+Zip file size: 47241 bytes, number of entries: 29
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 01:20 NEMO_reports/__init__.py
+-rw-r--r--  2.0 unx       41 b- defN 24-Apr-17 01:20 NEMO_reports/app_settings.py
+-rw-r--r--  2.0 unx      486 b- defN 24-Apr-17 01:20 NEMO_reports/apps.py
+-rw-r--r--  2.0 unx     1732 b- defN 24-Apr-17 01:20 NEMO_reports/customizations.py
+-rw-r--r--  2.0 unx     1620 b- defN 24-Apr-17 01:20 NEMO_reports/urls.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 01:20 NEMO_reports/migrations/__init__.py
+-rw-rw-rw-  2.0 unx      243 b- defN 24-Apr-17 01:20 NEMO_reports/static/NEMO_reports/NEMO_reports.css
+-rw-rw-rw-  2.0 unx     7659 b- defN 24-Apr-17 01:20 NEMO_reports/static/NEMO_reports/daterangepicker.css
+-rw-rw-rw-  2.0 unx    66305 b- defN 24-Apr-17 01:20 NEMO_reports/static/NEMO_reports/daterangepicker.js
+-rw-rw-rw-  2.0 unx     3603 b- defN 24-Apr-17 01:20 NEMO_reports/templates/NEMO_reports/report_active_users.html
+-rw-rw-rw-  2.0 unx     9524 b- defN 24-Apr-17 01:20 NEMO_reports/templates/NEMO_reports/report_base.html
+-rw-rw-rw-  2.0 unx     2557 b- defN 24-Apr-17 01:20 NEMO_reports/templates/NEMO_reports/report_facility_usage.html
+-rw-rw-rw-  2.0 unx     4174 b- defN 24-Apr-17 01:20 NEMO_reports/templates/NEMO_reports/report_new_users.html
+-rw-rw-rw-  2.0 unx     1049 b- defN 24-Apr-17 01:20 NEMO_reports/templates/NEMO_reports/reports.html
+-rw-rw-rw-  2.0 unx      287 b- defN 24-Apr-17 01:20 NEMO_reports/templates/base/navbar.html
+-rw-rw-rw-  2.0 unx      139 b- defN 24-Apr-17 01:20 NEMO_reports/templates/base/navbar_reports.html
+-rw-rw-rw-  2.0 unx     7129 b- defN 24-Apr-17 01:20 NEMO_reports/templates/customizations/customizations_reports.html
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 01:20 NEMO_reports/views/__init__.py
+-rw-r--r--  2.0 unx    18658 b- defN 24-Apr-17 01:20 NEMO_reports/views/reporting.py
+-rw-r--r--  2.0 unx    15073 b- defN 24-Apr-17 01:20 NEMO_reports/views/reporting_facilily_usage.py
+-rw-r--r--  2.0 unx    12228 b- defN 24-Apr-17 01:20 NEMO_reports/views/reporting_invoice_charges.py
+-rw-r--r--  2.0 unx    16191 b- defN 24-Apr-17 01:20 NEMO_reports/views/reporting_invoice_item_charges.py
+-rw-r--r--  2.0 unx    24880 b- defN 24-Apr-17 01:20 NEMO_reports/views/reporting_new_user_activities.py
+-rw-r--r--  2.0 unx    15359 b- defN 24-Apr-17 01:20 NEMO_reports/views/reporting_unique_user_prj_acc.py
+-rw-rw-rw-  2.0 unx     1074 b- defN 24-Apr-17 01:20 NEMO_reports-1.7.2.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2116 b- defN 24-Apr-17 01:20 NEMO_reports-1.7.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-17 01:20 NEMO_reports-1.7.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx       13 b- defN 24-Apr-17 01:20 NEMO_reports-1.7.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2818 b- defN 24-Apr-17 01:20 NEMO_reports-1.7.2.dist-info/RECORD
+29 files, 215050 bytes uncompressed, 42553 bytes compressed:  80.2%
```

## zipnote {}

```diff
@@ -66,23 +66,23 @@
 
 Filename: NEMO_reports/views/reporting_new_user_activities.py
 Comment: 
 
 Filename: NEMO_reports/views/reporting_unique_user_prj_acc.py
 Comment: 
 
-Filename: NEMO_reports-1.7.1.dist-info/LICENSE
+Filename: NEMO_reports-1.7.2.dist-info/LICENSE
 Comment: 
 
-Filename: NEMO_reports-1.7.1.dist-info/METADATA
+Filename: NEMO_reports-1.7.2.dist-info/METADATA
 Comment: 
 
-Filename: NEMO_reports-1.7.1.dist-info/WHEEL
+Filename: NEMO_reports-1.7.2.dist-info/WHEEL
 Comment: 
 
-Filename: NEMO_reports-1.7.1.dist-info/top_level.txt
+Filename: NEMO_reports-1.7.2.dist-info/top_level.txt
 Comment: 
 
-Filename: NEMO_reports-1.7.1.dist-info/RECORD
+Filename: NEMO_reports-1.7.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## NEMO_reports/customizations.py

```diff
@@ -10,14 +10,15 @@
 
 @customization(title="Reports", key="reports")
 class ReportsCustomization(CustomizationBase):
     variables = {
         "reports_first_day_of_week": "1",
         "reports_default_daterange": "",
         "reports_exclude_projects": "",
+        "reports_exclude_no_charge_projects": "",
         "reports_timedelta_format": "{D}d {H}h {M}m {S:.0f}s",
     }
 
     def context(self) -> Dict:
         # Override to add list of tools
         dictionary = super().context()
         dictionary["projects"] = Project.objects.all()
```

## NEMO_reports/templates/NEMO_reports/report_active_users.html

```diff
@@ -1,41 +1,71 @@
 {% extends 'NEMO_reports/report_base.html' %}
 {% load custom_tags_and_filters %}
 {% block extra_form %}
-	<div class="form-group">
-		<label class="col-sm-2 control-label">Activities:</label>
-		<div class="col-sm-9">
-			<div class="checkbox">
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="tool_usage" value="off"/>
-					<label for="tool_usage"><input type="checkbox" id="tool_usage" name="tool_usage" {% if tool_usage != "off" %}checked{% endif %}> Tool usage</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="area_access" value="off"/>
-					<label for="area_access"><input type="checkbox" id="area_access" name="area_access" {% if area_access != "off" %}checked{% endif %}> Area access</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="consumables" value="off"/>
-					<label for="consumables"><input type="checkbox" id="consumables" name="consumables" {% if consumables != "off" %}checked{% endif %}> Consumables/Supplies</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="staff_charges" value="off"/>
-					<label for="staff_charges"><input type="checkbox" id="staff_charges" name="staff_charges" {% if staff_charges != "off" %}checked{% endif %}> Staff charges</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="training" value="off"/>
-					<label for="training"><input type="checkbox" id="training" name="training" {% if training != "off" %}checked{% endif %}> Training</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="missed_reservations" value="off"/>
-					<label for="missed_reservations"><input type="checkbox" id="missed_reservations" name="missed_reservations" {% if missed_reservations != "off" %}checked{% endif %}> Missed reservations</label>
-				</div>
-				{% if "NEMO_billing"|app_installed %}
-					<div class="row col-lg-3 col-md-4 col-sm-5">
-						<input type="hidden" name="custom_charges" value="off"/>
-						<label for="custom_charges"><input type="checkbox" id="custom_charges" name="custom_charges" {% if custom_charges != "off" %}checked{% endif %}> Custom charges</label>
-					</div>
-				{% endif %}
-			</div>
-		</div>
-	</div>
-{% endblock %}
+    <div class="form-group">
+        <label class="col-sm-2 control-label">Activities:</label>
+        <div class="col-sm-9">
+            <div class="checkbox">
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="tool_usage" value="off" />
+                    <label for="tool_usage">
+                        <input type="checkbox" id="tool_usage" name="tool_usage" {% if tool_usage != "off" %}checked{% endif %}>
+                        Tool usage
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="area_access" value="off" />
+                    <label for="area_access">
+                        <input type="checkbox" id="area_access" name="area_access" {% if area_access != "off" %}checked{% endif %}>
+                        Area access
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="consumables" value="off" />
+                    <label for="consumables">
+                        <input type="checkbox" id="consumables" name="consumables" {% if consumables != "off" %}checked{% endif %}>
+                        Consumables/Supplies
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="staff_charges" value="off" />
+                    <label for="staff_charges">
+                        <input type="checkbox"
+                               id="staff_charges"
+                               name="staff_charges"
+                               {% if staff_charges != "off" %}checked{% endif %}>
+                        Staff charges
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="training" value="off" />
+                    <label for="training">
+                        <input type="checkbox" id="training" name="training" {% if training != "off" %}checked{% endif %}>
+                        Training
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="missed_reservations" value="off" />
+                    <label for="missed_reservations">
+                        <input type="checkbox"
+                               id="missed_reservations"
+                               name="missed_reservations"
+                               {% if missed_reservations != "off" %}checked{% endif %}>
+                        Missed reservations
+                    </label>
+                </div>
+                {% if "NEMO_billing"|app_installed %}
+                    <div class="row col-lg-3 col-md-4 col-sm-5">
+                        <input type="hidden" name="custom_charges" value="off" />
+                        <label for="custom_charges">
+                            <input type="checkbox"
+                                   id="custom_charges"
+                                   name="custom_charges"
+                                   {% if custom_charges != "off" %}checked{% endif %}>
+                            Custom charges
+                        </label>
+                    </div>
+                {% endif %}
+            </div>
+        </div>
+    </div>
+{% endblock %}
```

## NEMO_reports/templates/NEMO_reports/report_base.html

```diff
@@ -1,71 +1,100 @@
 {% extends "base.html" %}
 {% load static %}
 {% load custom_tags_and_filters %}
 {% block extrahead %}
-	{# Daterange picker #}
+    {# Daterange picker #}
     <script type="text/javascript" src="{% static "NEMO_reports/daterangepicker.js" %}"></script>
-    <link rel="stylesheet" type="text/css" href="{% static "NEMO_reports/daterangepicker.css" %}"/>
+    <link rel="stylesheet" type="text/css" href="{% static "NEMO_reports/daterangepicker.css" %}" />
     {# Reports #}
-	<link rel="stylesheet" type="text/css" href="{% static "NEMO_reports/NEMO_reports.css" %}"/>
+    <link rel="stylesheet" type="text/css" href="{% static "NEMO_reports/NEMO_reports.css" %}" />
 {% endblock %}
 {% block content %}
-	<div class="well well-report-dashboard">
-		<div class="pull-left hidden-xs" style="position: absolute;margin: 15px"><a class="btn btn-default" href="{% url 'reporting' %}"><i class="glyphicon glyphicon-menu-left"></i> Reports</a></div>
-		<h2 class="text-center">{{ report_title }}</h2>
-		{% if report_description %}<p class="text-center help-block" style="padding: 0 10px">{{ report_description|safe }}</p>{% endif %}
-		<div class="report-form">
-			{% block report_form %}
-				<form id="report_form" class="form-horizontal">
-					<div class="form-group">
-						<label class="col-sm-2 control-label" for="start">Date range:</label>
-						<div class="col-md-3 col-sm-4">
-							<div class="input-group">
-								<input class="form-control text-center" type="text" id="start" name="start" required>
-								<div id="picker-container" class="invisible" style="float: left;position: relative;height: 0;width: 100%"></div>
-								<span class="daterange-calendar input-group-btn">
-									<button type="button" class="btn btn-default btn-input-white" onclick="daterange_picker.data('daterangepicker').show();"><i class="glyphicon glyphicon-calendar"></i></button>
-								</span>
-							</div>
-						</div>
-						<label class="col-sm-1 control-label" for="end" style="text-align: center">to</label>
-						<div class="col-md-3 col-sm-4">
-							<div class="input-group">
-								<input class="form-control text-center" type="text" id="end" name="end" required>
-								<span class="daterange-calendar input-group-btn">
-									<button type="button" class="btn btn-default btn-input-white" onclick="daterange_picker.data('daterangepicker').show();"><i class="glyphicon glyphicon-calendar"></i></button>
-								</span>
-							</div>
-						</div>
-						<label class="col-sm-1 control-label" style="text-align: center">(inclusive)</label>
-					</div>
-					<div class="form-group">
-						<label class="col-sm-2 control-label">Options:</label>
-						<div class="col-sm-9">
-							<div class="checkbox">
-								<div class="row col-sm-12">
-									<label><input type="checkbox" id="detailed_data" name="detailed_data" {% if detailed_data %}checked{% endif %}>Display detailed data (slower)</label>
-								</div>
-								<div class="row col-sm-12">
-									<label><input type="checkbox" id="split_by_month" name="split_by_month" {% if split_by_month %}checked{% endif %}>Split results by month</label>
-								</div>
-								<div class="row col-sm-12">
-									<label><input type="checkbox" id="cumulative_count" name="cumulative_count" {% if cumulative_count %}checked{% endif %}>Display cumulative results by month</label>
-								</div>
-							</div>
-						</div>
-					</div>
-					{% block extra_form %}{% endblock %}
-					<div class="form-group">
-						<div class="col-sm-offset-2 col-sm-2">
-							{% button type="save" value="Update" onclick="show_spinner();refresh_page()" %}
-						</div>
-					</div>
-				</form>
-				<script>
+    <div class="well well-report-dashboard">
+        <div class="pull-left hidden-xs" style="position: absolute;margin: 15px">
+            <a class="btn btn-default" href="{% url 'reporting' %}"><i class="glyphicon glyphicon-menu-left"></i> Reports</a>
+        </div>
+        <h2 class="text-center">{{ report_title }}</h2>
+        {% if report_description %}
+            <p class="text-center help-block" style="padding: 0 10px">{{ report_description|safe }}</p>
+        {% endif %}
+        <div class="report-form">
+            {% block report_form %}
+                <form id="report_form" class="form-horizontal">
+                    <div class="form-group">
+                        <label class="col-sm-2 control-label" for="start">Date range:</label>
+                        <div class="col-md-3 col-sm-4">
+                            <div class="input-group">
+                                <input class="form-control text-center" type="text" id="start" name="start" required>
+                                <div id="picker-container"
+                                     class="invisible"
+                                     style="float: left;
+                                            position: relative;
+                                            height: 0;
+                                            width: 100%"></div>
+                                <span class="daterange-calendar input-group-btn">
+                                    <button type="button"
+                                            class="btn btn-default btn-input-white"
+                                            onclick="daterange_picker.data('daterangepicker').show();">
+                                        <i class="glyphicon glyphicon-calendar"></i>
+                                    </button>
+                                </span>
+                            </div>
+                        </div>
+                        <label class="col-sm-1 control-label" for="end" style="text-align: center">to</label>
+                        <div class="col-md-3 col-sm-4">
+                            <div class="input-group">
+                                <input class="form-control text-center" type="text" id="end" name="end" required>
+                                <span class="daterange-calendar input-group-btn">
+                                    <button type="button"
+                                            class="btn btn-default btn-input-white"
+                                            onclick="daterange_picker.data('daterangepicker').show();">
+                                        <i class="glyphicon glyphicon-calendar"></i>
+                                    </button>
+                                </span>
+                            </div>
+                        </div>
+                        <label class="col-sm-1 control-label" style="text-align: center">(inclusive)</label>
+                    </div>
+                    <div class="form-group">
+                        <label class="col-sm-2 control-label">Options:</label>
+                        <div class="col-sm-9">
+                            <div class="checkbox">
+                                <div class="row col-sm-12">
+                                    <label>
+                                        <input type="checkbox" id="detailed_data" name="detailed_data" {% if detailed_data %}checked{% endif %}>
+                                        Display detailed data (slower)
+                                    </label>
+                                </div>
+                                <div class="row col-sm-12">
+                                    <label>
+                                        <input type="checkbox" id="split_by_month" name="split_by_month" {% if split_by_month %}checked{% endif %}>
+                                        Split results by month
+                                    </label>
+                                </div>
+                                <div class="row col-sm-12">
+                                    <label>
+                                        <input type="checkbox"
+                                               id="cumulative_count"
+                                               name="cumulative_count"
+                                               {% if cumulative_count %}checked{% endif %}>
+                                        Display cumulative results by month
+                                    </label>
+                                </div>
+                            </div>
+                        </div>
+                    </div>
+                    {% block extra_form %}{% endblock %}
+                    <div class="form-group">
+                        <div class="col-sm-offset-2 col-sm-2">
+                            {% button type="save" value="Update" onclick="show_spinner();refresh_page()" %}
+                        </div>
+                    </div>
+                </form>
+                <script>
 					let page_start_date = moment('{{ start|input_date_format }}', '{{ date_input_js_format }}');
 					let page_end_date = moment('{{ end|input_date_format }}', '{{ date_input_js_format }}');
 
 					function refresh_page(report_export)
 					{
                         report_export = report_export || false;
                         const url =  "?" + new URLSearchParams(new FormData(document.getElementById("report_form"))).toString();
@@ -104,47 +133,38 @@
 						   'This Year': [moment().startOf('year'), moment().endOf('year')],
 						   'Last Year': [moment().subtract(1, 'year').startOf('year'), moment().subtract(1, 'year').endOf('year')],
 						}
 					}, set_dates);
 					{% endwith %}
 
 					set_dates(page_start_date, page_end_date);
-				</script>
-			{% endblock %}
-		</div>
-		<div class="panel-body">
-			{% if not data.rows and not summary.rows %}
-				<div id="no-report-data" class="tab-content panel panel-default">
-					<div class="panel-body">
-						{% block empty_report %}<i>There is no data to display. Try selecting a different date range</i>{% endblock %}
-					</div>
-				</div>
-			{% else %}
-				<div id="report-data" class="tab-content panel panel-default" style="margin-bottom: 0;">
-					<div class="tab-pane active" id="data-tab">
-						<div class="panel-body">
-							{% block export %}
-								<div class="text-right">
-									<div>
-										{% button type="export" value="Export" onclick="refresh_page(true);" %}
-									</div>
-								</div>
-							{% endblock %}
-							{% block report_content %}
-								{% if summary.rows %}
-									<div class="table-responsive" style="margin-top: 40px">
-										{{ summary.to_html }}
-									</div>
-								{% endif %}
-								{% if data.rows %}
-									<div class="table-responsive" style="margin-top: 40px">
-										{{ data.to_html }}
-									</div>
-								{% endif %}
-							{% endblock %}
-						</div>
-					</div>
-				</div>
-			{% endif %}
-		</div>
-	</div>
-{% endblock %}
+				
+                </script>
+            {% endblock %}
+        </div>
+        <div class="panel-body">
+            {% if not data.rows and not summary.rows %}
+                <div id="no-report-data" class="tab-content panel panel-default">
+                    <div class="panel-body">
+                        {% block empty_report %}<i>There is no data to display. Try selecting a different date range</i>{% endblock %}
+                    </div>
+                </div>
+            {% else %}
+                <div id="report-data" class="tab-content panel panel-default" style="margin-bottom: 0;">
+                    <div class="tab-pane active" id="data-tab">
+                        <div class="panel-body">
+                            {% block export %}
+                                <div class="text-right">
+                                    <div>{% button type="export" value="Export" onclick="refresh_page(true);" %}</div>
+                                </div>
+                            {% endblock %}
+                            {% block report_content %}
+                                {% if summary.rows %}<div class="table-responsive" style="margin-top: 40px">{{ summary.to_html }}</div>{% endif %}
+                                {% if data.rows %}<div class="table-responsive" style="margin-top: 40px">{{ data.to_html }}</div>{% endif %}
+                            {% endblock %}
+                        </div>
+                    </div>
+                </div>
+            {% endif %}
+        </div>
+    </div>
+{% endblock %}
```

### html2text {}

```diff
@@ -1,27 +1,27 @@
 {% extends "base.html" %} {% load static %} {% load custom_tags_and_filters %}
 {% block extrahead %} {# Daterange picker #}
 }">
-}"/> {# Reports #}
-}"/> {% endblock %} {% block content %}
+}" /> {# Reports #}
+}" /> {% endblock %} {% block content %}
 _R_e_p_o_r_t_s
 ********** {{{{ rreeppoorrtt__ttiittllee }}}} **********
 {% if report_description %}
 {{ report_description|safe }}
 {% endif %}
 {% block report_form %}
 Date range:
 [start               ]
 to
 [end                 ]
 (inclusive)
 Options:
-% if detailed_data %}checked{% endif %}>Display detailed data (slower)
-% if split_by_month %}checked{% endif %}>Split results by month
-% if cumulative_count %}checked{% endif %}>Display cumulative results by month
+% if detailed_data %}checked{% endif %}> Display detailed data (slower)
+% if split_by_month %}checked{% endif %}> Split results by month
+% if cumulative_count %}checked{% endif %}> Display cumulative results by month
 {% block extra_form %}{% endblock %}
 {% button type="save" value="Update" onclick="show_spinner();refresh_page()" %}
 {% endblock %}
 {% if not data.rows and not summary.rows %}
 {% block empty_report %}There is no data to display. Try selecting a different
 date range{% endblock %}
 {% else %}
```

## NEMO_reports/templates/NEMO_reports/report_facility_usage.html

```diff
@@ -1,31 +1,52 @@
 {% extends 'NEMO_reports/report_base.html' %}
 {% load custom_tags_and_filters %}
 {% block extra_form %}
-	<div class="form-group">
-		<label class="col-sm-2 control-label">Activities:</label>
-		<div class="col-sm-9">
-			<div class="checkbox">
-				<div class="row col-lg-2 col-md-4 col-sm-5">
-					<input type="hidden" name="tool_usage" value="off"/>
-					<label for="tool_usage"><input type="checkbox" id="tool_usage" name="tool_usage" {% if tool_usage != "off" %}checked{% endif %}> Tool usage</label>
-				</div>
-				<div class="row col-lg-2 col-md-4 col-sm-5">
-					<input type="hidden" name="area_access" value="off"/>
-					<label for="area_access"><input type="checkbox" id="area_access" name="area_access" {% if area_access != "off" %}checked{% endif %}> Area access</label>
-				</div>
-				<div class="row col-lg-2 col-md-4 col-sm-5">
-					<input type="hidden" name="staff_charges" value="off"/>
-					<label for="staff_charges"><input type="checkbox" id="staff_charges" name="staff_charges" {% if staff_charges != "off" %}checked{% endif %}> Staff charges</label>
-				</div>
-				<div class="row col-lg-2 col-md-4 col-sm-5">
-					<input type="hidden" name="training" value="off"/>
-					<label for="training"><input type="checkbox" id="training" name="training" {% if training != "off" %}checked{% endif %}> Training</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="missed_reservations" value="off"/>
-					<label for="missed_reservations"><input type="checkbox" id="missed_reservations" name="missed_reservations" {% if missed_reservations != "off" %}checked{% endif %}> Missed reservations</label>
-				</div>
-			</div>
-		</div>
-	</div>
-{% endblock %}
+    <div class="form-group">
+        <label class="col-sm-2 control-label">Activities:</label>
+        <div class="col-sm-9">
+            <div class="checkbox">
+                <div class="row col-lg-2 col-md-4 col-sm-5">
+                    <input type="hidden" name="tool_usage" value="off" />
+                    <label for="tool_usage">
+                        <input type="checkbox" id="tool_usage" name="tool_usage" {% if tool_usage != "off" %}checked{% endif %}>
+                        Tool usage
+                    </label>
+                </div>
+                <div class="row col-lg-2 col-md-4 col-sm-5">
+                    <input type="hidden" name="area_access" value="off" />
+                    <label for="area_access">
+                        <input type="checkbox" id="area_access" name="area_access" {% if area_access != "off" %}checked{% endif %}>
+                        Area access
+                    </label>
+                </div>
+                <div class="row col-lg-2 col-md-4 col-sm-5">
+                    <input type="hidden" name="staff_charges" value="off" />
+                    <label for="staff_charges">
+                        <input type="checkbox"
+                               id="staff_charges"
+                               name="staff_charges"
+                               {% if staff_charges != "off" %}checked{% endif %}>
+                        Staff charges
+                    </label>
+                </div>
+                <div class="row col-lg-2 col-md-4 col-sm-5">
+                    <input type="hidden" name="training" value="off" />
+                    <label for="training">
+                        <input type="checkbox" id="training" name="training" {% if training != "off" %}checked{% endif %}>
+                        Training
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="missed_reservations" value="off" />
+                    <label for="missed_reservations">
+                        <input type="checkbox"
+                               id="missed_reservations"
+                               name="missed_reservations"
+                               {% if missed_reservations != "off" %}checked{% endif %}>
+                        Missed reservations
+                    </label>
+                </div>
+            </div>
+        </div>
+    </div>
+{% endblock %}
```

## NEMO_reports/templates/NEMO_reports/report_new_users.html

```diff
@@ -1,48 +1,84 @@
 {% extends 'NEMO_reports/report_base.html' %}
 {% load custom_tags_and_filters %}
 {% block extra_form %}
-	<div class="form-group">
-		<label class="col-sm-2 control-label">Date range:</label>
-		<div class="radio col-sm-9">
-			<label><input type="radio" name="during_date_range" value="" {% if not during_date_range %}checked{% endif %}>Use first ever activity</label>
-			<label><input type="radio" name="during_date_range" value="on" {% if during_date_range %}checked{% endif %}>Use first activity during date range</label>	
-		</div>
-	</div>
-	<div class="form-group">
-		<label class="col-sm-2 control-label">Activities:</label>
-		<div class="col-sm-9">
-			<div class="checkbox">
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="tool_usage" value="off"/>
-					<label for="tool_usage"><input type="checkbox" id="tool_usage" name="tool_usage" {% if tool_usage != "off" %}checked{% endif %}> Tool usage</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="area_access" value="off"/>
-					<label for="area_access"><input type="checkbox" id="area_access" name="area_access" {% if area_access != "off" %}checked{% endif %}> Area access</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="consumables" value="off"/>
-					<label for="consumables"><input type="checkbox" id="consumables" name="consumables" {% if consumables != "off" %}checked{% endif %}> Consumables/Supplies</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="staff_charges" value="off"/>
-					<label for="staff_charges"><input type="checkbox" id="staff_charges" name="staff_charges" {% if staff_charges != "off" %}checked{% endif %}> Staff charges</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="training" value="off"/>
-					<label for="training"><input type="checkbox" id="training" name="training" {% if training != "off" %}checked{% endif %}> Training</label>
-				</div>
-				<div class="row col-lg-3 col-md-4 col-sm-5">
-					<input type="hidden" name="missed_reservations" value="off"/>
-					<label for="missed_reservations"><input type="checkbox" id="missed_reservations" name="missed_reservations" {% if missed_reservations != "off" %}checked{% endif %}> Missed reservations</label>
-				</div>
-				{% if "NEMO_billing"|app_installed %}
-					<div class="row col-lg-3 col-md-4 col-sm-5">
-						<input type="hidden" name="custom_charges" value="off"/>
-						<label for="custom_charges"><input type="checkbox" id="custom_charges" name="custom_charges" {% if custom_charges != "off" %}checked{% endif %}> Custom charges</label>
-					</div>
-				{% endif %}
-			</div>
-		</div>
-	</div>
-{% endblock %}
+    <div class="form-group">
+        <label class="col-sm-2 control-label">Date range:</label>
+        <div class="radio col-sm-9">
+            <label>
+                <input type="radio" name="during_date_range" value="" {% if not during_date_range %}checked{% endif %}>
+                Use first ever activity
+            </label>
+            <label>
+                <input type="radio" name="during_date_range" value="on" {% if during_date_range %}checked{% endif %}>
+                Use first activity during date range
+            </label>
+        </div>
+    </div>
+    <div class="form-group">
+        <label class="col-sm-2 control-label">Activities:</label>
+        <div class="col-sm-9">
+            <div class="checkbox">
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="tool_usage" value="off" />
+                    <label for="tool_usage">
+                        <input type="checkbox" id="tool_usage" name="tool_usage" {% if tool_usage != "off" %}checked{% endif %}>
+                        Tool usage
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="area_access" value="off" />
+                    <label for="area_access">
+                        <input type="checkbox" id="area_access" name="area_access" {% if area_access != "off" %}checked{% endif %}>
+                        Area access
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="consumables" value="off" />
+                    <label for="consumables">
+                        <input type="checkbox" id="consumables" name="consumables" {% if consumables != "off" %}checked{% endif %}>
+                        Consumables/Supplies
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="staff_charges" value="off" />
+                    <label for="staff_charges">
+                        <input type="checkbox"
+                               id="staff_charges"
+                               name="staff_charges"
+                               {% if staff_charges != "off" %}checked{% endif %}>
+                        Staff charges
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="training" value="off" />
+                    <label for="training">
+                        <input type="checkbox" id="training" name="training" {% if training != "off" %}checked{% endif %}>
+                        Training
+                    </label>
+                </div>
+                <div class="row col-lg-3 col-md-4 col-sm-5">
+                    <input type="hidden" name="missed_reservations" value="off" />
+                    <label for="missed_reservations">
+                        <input type="checkbox"
+                               id="missed_reservations"
+                               name="missed_reservations"
+                               {% if missed_reservations != "off" %}checked{% endif %}>
+                        Missed reservations
+                    </label>
+                </div>
+                {% if "NEMO_billing"|app_installed %}
+                    <div class="row col-lg-3 col-md-4 col-sm-5">
+                        <input type="hidden" name="custom_charges" value="off" />
+                        <label for="custom_charges">
+                            <input type="checkbox"
+                                   id="custom_charges"
+                                   name="custom_charges"
+                                   {% if custom_charges != "off" %}checked{% endif %}>
+                            Custom charges
+                        </label>
+                    </div>
+                {% endif %}
+            </div>
+        </div>
+    </div>
+{% endblock %}
```

## NEMO_reports/templates/NEMO_reports/reports.html

```diff
@@ -1,24 +1,25 @@
 {% extends "base.html" %}
 {% load static %}
 {% load custom_tags_and_filters %}
 {% block extrahead %}
-	<link rel="stylesheet" type="text/css" href="{% static "NEMO_reports/NEMO_reports.css" %}"/>
+    <link rel="stylesheet" type="text/css" href="{% static "NEMO_reports/NEMO_reports.css" %}" />
 {% endblock %}
 {% block title %}Reports{% endblock %}
 {% block content %}
-	<h3>Available reports:</h3>
-	<ul>
-	{% for report in report_dict.values %}
-		<li>
-			<a href="{% url report.report_url %}">{{ report.report_title }}</a>{% if report.report_description %}: <span class="help-block">{{ report.report_description|safe }}</span>{% endif %}
-		</li>
-	{% endfor %}
-		{% if "NEMO_reporting"|app_installed %}
-			{% navigation_url 'reports' 'Other' user.is_superuser user.is_facility_manager as other_reports_url %}
-			{% if other_reports_url %}
-				{{ other_reports_url }}
-				<span class="help-block">Various other reports (Aging schedule, Tool usage, etc.)</span>
-			{% endif %}
-		{% endif %}
-	</ul>
-{% endblock %}
+    <h3>Available reports:</h3>
+    <ul>
+        {% for report in report_dict.values %}
+            <li>
+                <a href="{% url report.report_url %}">{{ report.report_title }}</a>
+                {% if report.report_description %}: <span class="help-block">{{ report.report_description|safe }}</span>{% endif %}
+            </li>
+        {% endfor %}
+        {% if "NEMO_reporting"|app_installed %}
+            {% navigation_url 'reports' 'Other' user.is_superuser user.is_facility_manager as other_reports_url %}
+            {% if other_reports_url %}
+                {{ other_reports_url }}
+                <span class="help-block">Various other reports (Aging schedule, Tool usage, etc.)</span>
+            {% endif %}
+        {% endif %}
+    </ul>
+{% endblock %}
```

### html2text {}

```diff
@@ -1,13 +1,13 @@
 {% extends "base.html" %} {% load static %} {% load custom_tags_and_filters %}
 {% block extrahead %}
-}"/> {% endblock %} {% block title %}Reports{% endblock %} {% block content %}
+}" /> {% endblock %} {% block title %}Reports{% endblock %} {% block content %}
 ******** AAvvaaiillaabbllee rreeppoorrttss:: ********
     * {% for report in report_dict.values %}
-    * _{_{_ _r_e_p_o_r_t_._r_e_p_o_r_t___t_i_t_l_e_ _}_}{% if report.report_description %}: {
+    * _{_{_ _r_e_p_o_r_t_._r_e_p_o_r_t___t_i_t_l_e_ _}_} {% if report.report_description %}: {
       { report.report_description|safe }}{% endif %}
     * {% endfor %} {% if "NEMO_reporting"|app_installed %} {% navigation_url
       'reports' 'Other' user.is_superuser user.is_facility_manager as
       other_reports_url %} {% if other_reports_url %} {{ other_reports_url }}
       Various other reports (Aging schedule, Tool usage, etc.) {% endif %} {%
       endif %}
 {% endblock %}
```

## NEMO_reports/templates/base/navbar.html

```diff
@@ -1,9 +1,9 @@
 {% extends 'base/navbar_base.html' %}
 {% load custom_tags_and_filters %}
 {% block navbar_admin %}
-	{{ block.super }}
-	{% if "NEMO_billing"|app_installed %}
-		{% include 'base/navbar_billing.html' %}
-	{% endif %}
-	{% include 'base/navbar_reports.html' %}
+    {{ block.super }}
+    {% if "NEMO_billing"|app_installed %}
+        {% include 'base/navbar_billing.html' %}
+    {% endif %}
+    {% include 'base/navbar_reports.html' %}
 {% endblock %}
```

## NEMO_reports/templates/base/navbar_reports.html

 * *Ordering differences only*

```diff
@@ -1,2 +1,2 @@
 {% load custom_tags_and_filters %}
-{% navigation_url 'reporting' 'Reports' user.is_accounting_officer user.is_manager user.is_superuser %}
+{% navigation_url 'reporting' 'Reports' user.is_accounting_officer user.is_manager user.is_superuser %}
```

## NEMO_reports/templates/customizations/customizations_reports.html

```diff
@@ -9,285 +9,438 @@
 00000080: 203c 666f 726d 206d 6574 686f 643d 2250   <form method="P
 00000090: 4f53 5422 2061 6374 696f 6e3d 227b 2520  OST" action="{% 
 000000a0: 7572 6c20 2763 7573 746f 6d69 7a65 2720  url 'customize' 
 000000b0: 2772 6570 6f72 7473 2720 257d 2220 636c  'reports' %}" cl
 000000c0: 6173 733d 2266 6f72 6d2d 686f 7269 7a6f  ass="form-horizo
 000000d0: 6e74 616c 223e 0a20 2020 2020 2020 207b  ntal">.        {
 000000e0: 2520 6373 7266 5f74 6f6b 656e 2025 7d0a  % csrf_token %}.
-000000f0: 0909 3c64 6976 2063 6c61 7373 3d22 666f  ..<div class="fo
-00000100: 726d 2d67 726f 7570 223e 0a20 2020 2020  rm-group">.     
-00000110: 2020 2020 2020 203c 6c61 6265 6c20 636c         <label cl
-00000120: 6173 733d 2263 6f6e 7472 6f6c 2d6c 6162  ass="control-lab
-00000130: 656c 2063 6f6c 2d6d 642d 3322 203e 4669  el col-md-3" >Fi
-00000140: 7273 7420 6461 7920 6f66 2074 6865 2077  rst day of the w
-00000150: 6565 6b3c 2f6c 6162 656c 3e0a 2020 2020  eek</label>.    
-00000160: 2020 2020 2020 2020 3c64 6976 2063 6c61          <div cla
-00000170: 7373 3d22 636f 6c2d 6d64 2d39 223e 0a20  ss="col-md-9">. 
-00000180: 2020 2020 2020 2020 2020 2020 2020 203c                 <
-00000190: 6469 7620 636c 6173 733d 2272 6164 696f  div class="radio
-000001a0: 223e 0a20 2020 2020 2020 2020 2020 2020  ">.             
-000001b0: 2020 2020 2020 203c 6c61 6265 6c3e 3c69         <label><i
-000001c0: 6e70 7574 2074 7970 653d 2272 6164 696f  nput type="radio
-000001d0: 2220 6964 3d22 7265 706f 7274 735f 6669  " id="reports_fi
-000001e0: 7273 745f 6461 795f 6f66 5f77 6565 6b22  rst_day_of_week"
-000001f0: 206e 616d 653d 2272 6570 6f72 7473 5f66   name="reports_f
-00000200: 6972 7374 5f64 6179 5f6f 665f 7765 656b  irst_day_of_week
-00000210: 2220 7b25 2069 6620 6e6f 7420 7265 706f  " {% if not repo
-00000220: 7274 735f 6669 7273 745f 6461 795f 6f66  rts_first_day_of
-00000230: 5f77 6565 6b20 6f72 2072 6570 6f72 7473  _week or reports
-00000240: 5f66 6972 7374 5f64 6179 5f6f 665f 7765  _first_day_of_we
-00000250: 656b 203d 3d20 2731 2720 257d 6368 6563  ek == '1' %}chec
-00000260: 6b65 647b 2520 656e 6469 6620 257d 2076  ked{% endif %} v
-00000270: 616c 7565 3d22 3122 3e20 4d6f 6e64 6179  alue="1"> Monday
-00000280: 3c2f 6c61 6265 6c3e 0a20 2020 2020 2020  </label>.       
-00000290: 2020 2020 2020 2020 2020 2020 203c 6c61               <la
-000002a0: 6265 6c3e 3c69 6e70 7574 2074 7970 653d  bel><input type=
-000002b0: 2272 6164 696f 2220 6964 3d22 7265 706f  "radio" id="repo
-000002c0: 7274 735f 6669 7273 745f 6461 795f 6f66  rts_first_day_of
-000002d0: 5f77 6565 6b22 206e 616d 653d 2272 6570  _week" name="rep
-000002e0: 6f72 7473 5f66 6972 7374 5f64 6179 5f6f  orts_first_day_o
-000002f0: 665f 7765 656b 2220 7b25 2069 6620 7265  f_week" {% if re
-00000300: 706f 7274 735f 6669 7273 745f 6461 795f  ports_first_day_
-00000310: 6f66 5f77 6565 6b20 3d3d 2027 3027 2025  of_week == '0' %
-00000320: 7d63 6865 636b 6564 7b25 2065 6e64 6966  }checked{% endif
-00000330: 2025 7d20 7661 6c75 653d 2230 223e 2053   %} value="0"> S
-00000340: 756e 6461 793c 2f6c 6162 656c 3e0a 2020  unday</label>.  
-00000350: 2020 2020 2020 2020 2020 2020 2020 3c2f                </
-00000360: 6469 763e 0a20 2020 2020 2020 2020 2020  div>.           
-00000370: 203c 2f64 6976 3e0a 2020 2020 2020 2020   </div>.        
-00000380: 3c2f 6469 763e 0a20 2020 2020 2020 203c  </div>.        <
-00000390: 6469 7620 636c 6173 733d 2266 6f72 6d2d  div class="form-
-000003a0: 6772 6f75 7022 3e0a 2020 2020 2020 2020  group">.        
-000003b0: 2020 2020 3c6c 6162 656c 2063 6c61 7373      <label class
-000003c0: 3d22 636f 6e74 726f 6c2d 6c61 6265 6c20  ="control-label 
-000003d0: 636f 6c2d 6d64 2d33 2220 666f 723d 2272  col-md-3" for="r
-000003e0: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
-000003f0: 6174 6572 616e 6765 223e 4465 6661 756c  aterange">Defaul
-00000400: 7420 6461 7465 7261 6e67 653c 2f6c 6162  t daterange</lab
-00000410: 656c 3e0a 2020 2020 2020 2020 2020 2020  el>.            
-00000420: 3c64 6976 2063 6c61 7373 3d22 636f 6c2d  <div class="col-
-00000430: 6d64 2d39 223e 0a20 2020 2020 2020 2020  md-9">.         
-00000440: 2020 2020 2020 203c 6469 7620 636c 6173         <div clas
-00000450: 733d 2272 6164 696f 223e 0a20 2020 2020  s="radio">.     
-00000460: 2020 2020 2020 2020 2020 2020 2020 203c                 <
-00000470: 6c61 6265 6c3e 3c69 6e70 7574 2074 7970  label><input typ
-00000480: 653d 2272 6164 696f 2220 6964 3d22 7265  e="radio" id="re
-00000490: 706f 7274 735f 6465 6661 756c 745f 6461  ports_default_da
-000004a0: 7465 7261 6e67 6522 206e 616d 653d 2272  terange" name="r
-000004b0: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
-000004c0: 6174 6572 616e 6765 2220 7b25 2069 6620  aterange" {% if 
-000004d0: 6e6f 7420 7265 706f 7274 735f 6465 6661  not reports_defa
-000004e0: 756c 745f 6461 7465 7261 6e67 6520 257d  ult_daterange %}
-000004f0: 6368 6563 6b65 647b 2520 656e 6469 6620  checked{% endif 
-00000500: 257d 2076 616c 7565 3d22 223e 2054 6f64  %} value=""> Tod
-00000510: 6179 3c2f 6c61 6265 6c3e 0a20 2020 2020  ay</label>.     
-00000520: 2020 2020 2020 2020 2020 2020 2020 203c                 <
-00000530: 6c61 6265 6c3e 3c69 6e70 7574 2074 7970  label><input typ
-00000540: 653d 2272 6164 696f 2220 6e61 6d65 3d22  e="radio" name="
-00000550: 7265 706f 7274 735f 6465 6661 756c 745f  reports_default_
-00000560: 6461 7465 7261 6e67 6522 207b 2520 6966  daterange" {% if
-00000570: 2072 6570 6f72 7473 5f64 6566 6175 6c74   reports_default
-00000580: 5f64 6174 6572 616e 6765 203d 3d20 2779  _daterange == 'y
-00000590: 6573 7465 7264 6179 2720 257d 6368 6563  esterday' %}chec
-000005a0: 6b65 647b 2520 656e 6469 6620 257d 2076  ked{% endif %} v
-000005b0: 616c 7565 3d22 7965 7374 6572 6461 7922  alue="yesterday"
-000005c0: 3e20 5965 7374 6572 6461 793c 2f6c 6162  > Yesterday</lab
-000005d0: 656c 3e0a 2020 2020 2020 2020 2020 2020  el>.            
-000005e0: 2020 2020 2020 2020 3c6c 6162 656c 3e3c          <label><
-000005f0: 696e 7075 7420 7479 7065 3d22 7261 6469  input type="radi
-00000600: 6f22 206e 616d 653d 2272 6570 6f72 7473  o" name="reports
-00000610: 5f64 6566 6175 6c74 5f64 6174 6572 616e  _default_dateran
-00000620: 6765 2220 7b25 2069 6620 7265 706f 7274  ge" {% if report
-00000630: 735f 6465 6661 756c 745f 6461 7465 7261  s_default_datera
-00000640: 6e67 6520 3d3d 2027 7468 6973 5f77 6565  nge == 'this_wee
-00000650: 6b27 2025 7d63 6865 636b 6564 7b25 2065  k' %}checked{% e
-00000660: 6e64 6966 2025 7d20 7661 6c75 653d 2274  ndif %} value="t
-00000670: 6869 735f 7765 656b 223e 2054 6869 7320  his_week"> This 
-00000680: 7765 656b 3c2f 6c61 6265 6c3e 0a20 2020  week</label>.   
-00000690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000006a0: 203c 6c61 6265 6c3e 3c69 6e70 7574 2074   <label><input t
-000006b0: 7970 653d 2272 6164 696f 2220 6e61 6d65  ype="radio" name
-000006c0: 3d22 7265 706f 7274 735f 6465 6661 756c  ="reports_defaul
-000006d0: 745f 6461 7465 7261 6e67 6522 207b 2520  t_daterange" {% 
-000006e0: 6966 2072 6570 6f72 7473 5f64 6566 6175  if reports_defau
-000006f0: 6c74 5f64 6174 6572 616e 6765 203d 3d20  lt_daterange == 
-00000700: 2774 6869 735f 6d6f 6e74 6827 2025 7d63  'this_month' %}c
-00000710: 6865 636b 6564 7b25 2065 6e64 6966 2025  hecked{% endif %
-00000720: 7d20 7661 6c75 653d 2274 6869 735f 6d6f  } value="this_mo
-00000730: 6e74 6822 3e20 5468 6973 206d 6f6e 7468  nth"> This month
-00000740: 3c2f 6c61 6265 6c3e 0a20 2020 2020 2020  </label>.       
-00000750: 2020 2020 2020 2020 2020 2020 203c 6c61               <la
-00000760: 6265 6c3e 3c69 6e70 7574 2074 7970 653d  bel><input type=
-00000770: 2272 6164 696f 2220 6e61 6d65 3d22 7265  "radio" name="re
-00000780: 706f 7274 735f 6465 6661 756c 745f 6461  ports_default_da
-00000790: 7465 7261 6e67 6522 207b 2520 6966 2072  terange" {% if r
-000007a0: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
-000007b0: 6174 6572 616e 6765 203d 3d20 2774 6869  aterange == 'thi
-000007c0: 735f 7965 6172 2720 257d 6368 6563 6b65  s_year' %}checke
-000007d0: 647b 2520 656e 6469 6620 257d 2076 616c  d{% endif %} val
-000007e0: 7565 3d22 7468 6973 5f79 6561 7222 3e20  ue="this_year"> 
-000007f0: 5468 6973 2079 6561 723c 2f6c 6162 656c  This year</label
-00000800: 3e0a 2020 2020 2020 2020 2020 2020 2020  >.              
-00000810: 2020 3c2f 6469 763e 0a20 2020 2020 2020    </div>.       
-00000820: 2020 2020 203c 2f64 6976 3e0a 2020 2020       </div>.    
-00000830: 2020 2020 3c2f 6469 763e 0a09 093c 6469      </div>...<di
-00000840: 7620 636c 6173 733d 2266 6f72 6d2d 6772  v class="form-gr
-00000850: 6f75 7020 7b25 2069 6620 6572 726f 7273  oup {% if errors
-00000860: 2e72 6570 6f72 7473 5f74 696d 6564 656c  .reports_timedel
-00000870: 7461 5f66 6f72 6d61 7420 257d 6861 732d  ta_format %}has-
-00000880: 6572 726f 727b 2520 656e 6469 6620 257d  error{% endif %}
-00000890: 223e 0a09 0909 3c6c 6162 656c 2063 6c61  ">....<label cla
-000008a0: 7373 3d22 636f 6e74 726f 6c2d 6c61 6265  ss="control-labe
-000008b0: 6c20 636f 6c2d 6d64 2d33 2220 666f 723d  l col-md-3" for=
-000008c0: 2272 6570 6f72 7473 5f74 696d 6564 656c  "reports_timedel
-000008d0: 7461 5f66 6f72 6d61 7422 3e44 7572 6174  ta_format">Durat
-000008e0: 696f 6e20 666f 726d 6174 3c2f 6c61 6265  ion format</labe
-000008f0: 6c3e 0a09 0909 3c64 6976 2063 6c61 7373  l>....<div class
-00000900: 3d22 636f 6c2d 6d64 2d37 223e 0a09 0909  ="col-md-7">....
-00000910: 093c 696e 7075 7420 6e61 6d65 3d22 7265  .<input name="re
-00000920: 706f 7274 735f 7469 6d65 6465 6c74 615f  ports_timedelta_
-00000930: 666f 726d 6174 2220 6964 3d22 7265 706f  format" id="repo
-00000940: 7274 735f 7469 6d65 6465 6c74 615f 666f  rts_timedelta_fo
-00000950: 726d 6174 2220 7479 7065 3d22 7465 7874  rmat" type="text
-00000960: 2220 6175 746f 636f 6d70 6c65 7465 3d22  " autocomplete="
-00000970: 6f66 6622 2063 6c61 7373 3d22 666f 726d  off" class="form
-00000980: 2d63 6f6e 7472 6f6c 2220 7661 6c75 653d  -control" value=
-00000990: 227b 7b20 7265 706f 7274 735f 7469 6d65  "{{ reports_time
-000009a0: 6465 6c74 615f 666f 726d 6174 207d 7d22  delta_format }}"
-000009b0: 3e0a 0909 093c 2f64 6976 3e0a 0909 097b  >....</div>....{
-000009c0: 2520 6966 2065 7272 6f72 732e 7265 706f  % if errors.repo
-000009d0: 7274 735f 7469 6d65 6465 6c74 615f 666f  rts_timedelta_fo
-000009e0: 726d 6174 2025 7d0a 0909 0909 3c64 6976  rmat %}.....<div
-000009f0: 2063 6c61 7373 3d22 636f 6c2d 6d64 2d6f   class="col-md-o
-00000a00: 6666 7365 742d 3320 636f 6c2d 6d64 2d39  ffset-3 col-md-9
-00000a10: 2068 656c 702d 626c 6f63 6b20 6c69 6768   help-block ligh
-00000a20: 742d 6772 6579 223e 0a09 0909 0909 7b7b  t-grey">......{{
-00000a30: 2065 7272 6f72 732e 7265 706f 7274 735f   errors.reports_
-00000a40: 7469 6d65 6465 6c74 615f 666f 726d 6174  timedelta_format
-00000a50: 2e65 7272 6f72 207d 7d0a 0909 0909 3c2f  .error }}.....</
-00000a60: 6469 763e 0a09 0909 7b25 2065 6e64 6966  div>....{% endif
-00000a70: 2025 7d0a 0909 093c 6469 7620 636c 6173   %}....<div clas
-00000a80: 733d 2263 6f6c 2d6d 642d 6f66 6673 6574  s="col-md-offset
-00000a90: 2d33 2063 6f6c 2d6d 642d 3720 6865 6c70  -3 col-md-7 help
-00000aa0: 2d62 6c6f 636b 223e 0a09 0909 0945 7861  -block">.....Exa
-00000ab0: 6d70 6c65 7320 2874 6865 206c 6173 7420  mples (the last 
-00000ac0: 6669 656c 6420 6e65 6564 7320 746f 2062  field needs to b
-00000ad0: 6520 666f 726d 6174 7465 6420 6173 2061  e formatted as a
-00000ae0: 2066 6c6f 6174 293a 0a09 0909 093c 7072   float):.....<pr
-00000af0: 6520 7374 796c 653d 2277 6869 7465 2d73  e style="white-s
-00000b00: 7061 6365 3a20 7072 652d 7772 6170 3b22  pace: pre-wrap;"
-00000b10: 3e7b 443a 3032 7d64 207b 483a 3032 7d68  >{D:02}d {H:02}h
-00000b20: 207b 4d3a 3032 7d6d 207b 533a 3032 2e30   {M:02}m {S:02.0
-00000b30: 667d 7320 2d2d 3e20 3035 6420 3038 6820  f}s --> 05d 08h 
-00000b40: 3034 6d20 3032 733c 6272 3e7b 577d 7720  04m 02s<br>{W}w 
-00000b50: 7b44 7d64 207b 487d 3a7b 4d3a 3032 7d3a  {D}d {H}:{M:02}:
-00000b60: 7b53 3a30 322e 3066 7d20 2020 2020 2d2d  {S:02.0f}     --
-00000b70: 3e20 3477 2035 6420 383a 3034 3a30 323c  > 4w 5d 8:04:02<
-00000b80: 6272 3e7b 487d 6820 7b53 3a2e 3066 7d73  br>{H}h {S:.0f}s
-00000b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000ba0: 2020 2020 2020 2d2d 3e20 3732 6820 3830        --> 72h 80
-00000bb0: 3073 3c62 723e 7b48 3a2e 3166 7d68 2020  0s<br>{H:.1f}h  
-00000bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000bd0: 2020 2020 2020 2020 202d 2d3e 2037 322e           --> 72.
-00000be0: 3268 3c62 723e 7b48 3a2e 3266 7d68 2020  2h<br>{H:.2f}h  
-00000bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c00: 2020 2020 2020 2020 202d 2d3e 2037 322e           --> 72.
-00000c10: 3235 683c 2f70 7265 3e0a 0909 093c 2f64  25h</pre>....</d
-00000c20: 6976 3e0a 0909 3c2f 6469 763e 0a20 2020  iv>...</div>.   
-00000c30: 2020 2020 203c 6469 7620 636c 6173 733d       <div class=
-00000c40: 2266 6f72 6d2d 6772 6f75 7020 7b25 2069  "form-group {% i
-00000c50: 6620 6572 726f 7273 2e72 6570 6f72 7473  f errors.reports
-00000c60: 5f65 7863 6c75 6465 5f70 726f 6a65 6374  _exclude_project
-00000c70: 7320 257d 6861 732d 6572 726f 727b 2520  s %}has-error{% 
-00000c80: 656e 6469 6620 257d 223e 0a09 0909 3c6c  endif %}">....<l
-00000c90: 6162 656c 2063 6c61 7373 3d22 636f 6e74  abel class="cont
-00000ca0: 726f 6c2d 6c61 6265 6c20 636f 6c2d 6d64  rol-label col-md
-00000cb0: 2d33 2220 666f 723d 2265 7863 6c75 6465  -3" for="exclude
-00000cc0: 5f70 726f 6a65 6374 223e 4578 636c 7564  _project">Exclud
-00000cd0: 6564 2070 726f 6a65 6374 733c 2f6c 6162  ed projects</lab
-00000ce0: 656c 3e0a 0909 093c 6469 7620 636c 6173  el>....<div clas
-00000cf0: 733d 2263 6f6c 2d6d 642d 3722 3e0a 0909  s="col-md-7">...
-00000d00: 0909 3c69 6e70 7574 2069 643d 2265 7863  ..<input id="exc
-00000d10: 6c75 6465 5f70 726f 6a65 6374 2220 7479  lude_project" ty
-00000d20: 7065 3d22 7465 7874 2220 6175 746f 636f  pe="text" autoco
-00000d30: 6d70 6c65 7465 3d22 6f66 6622 2063 6c61  mplete="off" cla
-00000d40: 7373 3d22 666f 726d 2d63 6f6e 7472 6f6c  ss="form-control
-00000d50: 2220 706c 6163 6568 6f6c 6465 723d 2253  " placeholder="S
-00000d60: 6561 7263 6820 666f 7220 6120 7072 6f6a  earch for a proj
-00000d70: 6563 7420 746f 2065 7863 6c75 6465 223e  ect to exclude">
-00000d80: 0a09 0909 3c2f 6469 763e 0a09 0909 7b25  ....</div>....{%
-00000d90: 2069 6620 6572 726f 7273 2e72 6570 6f72   if errors.repor
-00000da0: 7473 5f65 7863 6c75 6465 5f70 726f 6a65  ts_exclude_proje
-00000db0: 6374 7320 257d 0a09 0909 093c 6469 7620  cts %}.....<div 
-00000dc0: 636c 6173 733d 2263 6f6c 2d6d 642d 6f66  class="col-md-of
-00000dd0: 6673 6574 2d33 2063 6f6c 2d6d 642d 3920  fset-3 col-md-9 
-00000de0: 6865 6c70 2d62 6c6f 636b 206c 6967 6874  help-block light
-00000df0: 2d67 7265 7922 3e0a 0909 0909 097b 7b20  -grey">......{{ 
-00000e00: 6572 726f 7273 2e72 6570 6f72 7473 5f65  errors.reports_e
-00000e10: 7863 6c75 6465 5f70 726f 6a65 6374 732e  xclude_projects.
-00000e20: 6572 726f 7220 7d7d 0a09 0909 093c 2f64  error }}.....</d
-00000e30: 6976 3e0a 0909 097b 2520 656e 6469 6620  iv>....{% endif 
-00000e40: 257d 0a09 093c 2f64 6976 3e0a 0909 3c64  %}...</div>...<d
-00000e50: 6976 2063 6c61 7373 3d22 666f 726d 2d67  iv class="form-g
-00000e60: 726f 7570 223e 0a09 0909 3c64 6976 2069  roup">....<div i
-00000e70: 643d 2265 7863 6c75 6465 2d6c 6973 7422  d="exclude-list"
-00000e80: 2063 6c61 7373 3d22 636f 6c2d 6d64 2d6f   class="col-md-o
-00000e90: 6666 7365 742d 3320 636f 6c2d 6d64 2d34  ffset-3 col-md-4
-00000ea0: 223e 0a09 0909 094e 6f20 7072 6f6a 6563  ">.....No projec
-00000eb0: 7473 2061 7265 2065 7863 6c75 6465 642e  ts are excluded.
-00000ec0: 0a09 0909 3c2f 6469 763e 0a09 093c 2f64  ....</div>...</d
-00000ed0: 6976 3e0a 0909 3c64 6976 2063 6c61 7373  iv>...<div class
-00000ee0: 3d22 6375 7374 6f6d 697a 6174 696f 6e2d  ="customization-
-00000ef0: 7365 7061 7261 7469 6f6e 223e 3c2f 6469  separation"></di
-00000f00: 763e 0a09 093c 6469 7620 636c 6173 733d  v>...<div class=
-00000f10: 2266 6f72 6d2d 6772 6f75 7022 3e0a 0909  "form-group">...
-00000f20: 093c 6469 7620 636c 6173 733d 2274 6578  .<div class="tex
-00000f30: 742d 6365 6e74 6572 223e 0a09 0909 097b  t-center">.....{
-00000f40: 2520 6275 7474 6f6e 2074 7970 653d 2273  % button type="s
-00000f50: 6176 6522 2076 616c 7565 3d22 5361 7665  ave" value="Save
-00000f60: 2073 6574 7469 6e67 7322 2025 7d0a 2020   settings" %}.  
-00000f70: 2020 2020 2020 2020 2020 3c2f 6469 763e            </div>
-00000f80: 0a20 2020 2020 2020 203c 2f64 6976 3e0a  .        </div>.
-00000f90: 093c 2f66 6f72 6d3e 0a3c 2f64 6976 3e0a  .</form>.</div>.
-00000fa0: 3c73 6372 6970 743e 0a09 6675 6e63 7469  <script>..functi
-00000fb0: 6f6e 2061 6464 5f70 726f 6a65 6374 286a  on add_project(j
-00000fc0: 7175 6572 795f 6576 656e 742c 2073 6561  query_event, sea
-00000fd0: 7263 685f 7365 6c65 6374 696f 6e2c 2064  rch_selection, d
-00000fe0: 6174 6173 6574 5f6e 616d 6529 0a09 7b0a  ataset_name)..{.
-00000ff0: 2020 2020 2020 2020 2428 7468 6973 292e          $(this).
-00001000: 7479 7065 6168 6561 6428 2776 616c 272c  typeahead('val',
-00001010: 2027 2729 2e66 6f63 7573 2829 3b0a 0909   '').focus();...
-00001020: 6164 645f 746f 5f6c 6973 7428 2223 6578  add_to_list("#ex
-00001030: 636c 7564 652d 6c69 7374 222c 2022 7265  clude-list", "re
-00001040: 6d6f 7665 5f70 726f 6a65 6374 222c 2073  move_project", s
-00001050: 6561 7263 685f 7365 6c65 6374 696f 6e2e  earch_selection.
-00001060: 6964 2c20 7365 6172 6368 5f73 656c 6563  id, search_selec
-00001070: 7469 6f6e 2e6e 616d 652c 2022 5265 6d6f  tion.name, "Remo
-00001080: 7665 2022 202b 2073 6561 7263 685f 7365  ve " + search_se
-00001090: 6c65 6374 696f 6e2e 6e61 6d65 2c20 2272  lection.name, "r
-000010a0: 6570 6f72 7473 5f65 7863 6c75 6465 5f70  eports_exclude_p
-000010b0: 726f 6a65 6374 735f 6c69 7374 2229 3b0a  rojects_list");.
-000010c0: 097d 0a20 2020 2066 756e 6374 696f 6e20  .}.    function 
-000010d0: 7265 6d6f 7665 5f70 726f 6a65 6374 2870  remove_project(p
-000010e0: 726f 6a65 6374 5f69 6429 0a09 7b0a 0909  roject_id)..{...
-000010f0: 7265 6d6f 7665 5f66 726f 6d5f 6c69 7374  remove_from_list
-00001100: 2822 2365 7863 6c75 6465 2d6c 6973 7422  ("#exclude-list"
-00001110: 2c20 2223 7265 706f 7274 735f 6578 636c  , "#reports_excl
-00001120: 7564 655f 7072 6f6a 6563 7473 5f6c 6973  ude_projects_lis
-00001130: 745f 2220 2b20 7072 6f6a 6563 745f 6964  t_" + project_id
-00001140: 2c20 224e 6f20 7072 6f6a 6563 7473 2061  , "No projects a
-00001150: 7265 2065 7863 6c75 6465 642e 2229 3b0a  re excluded.");.
-00001160: 097d 0a09 2428 2723 6578 636c 7564 655f  .}..$('#exclude_
-00001170: 7072 6f6a 6563 7427 292e 6175 746f 636f  project').autoco
-00001180: 6d70 6c65 7465 2827 7072 6f6a 6563 7473  mplete('projects
-00001190: 272c 2061 6464 5f70 726f 6a65 6374 2c20  ', add_project, 
-000011a0: 7b7b 2070 726f 6a65 6374 737c 6a73 6f6e  {{ projects|json
-000011b0: 5f73 6561 7263 685f 6261 7365 207d 7d29  _search_base }})
-000011c0: 3b0a 2020 2020 7b25 2066 6f72 2070 726f  ;.    {% for pro
-000011d0: 6a65 6374 2069 6e20 7365 6c65 6374 6564  ject in selected
-000011e0: 5f70 726f 6a65 6374 7320 257d 0a09 0961  _projects %}...a
-000011f0: 6464 5f70 726f 6a65 6374 2875 6e64 6566  dd_project(undef
-00001200: 696e 6564 2c20 7b6e 616d 653a 277b 7b20  ined, {name:'{{ 
-00001210: 7072 6f6a 6563 742e 6e61 6d65 207d 7d27  project.name }}'
-00001220: 2c20 6964 3a7b 7b20 7072 6f6a 6563 742e  , id:{{ project.
-00001230: 6964 207d 7d7d 293b 0a09 7b25 2065 6e64  id }}});..{% end
-00001240: 666f 7220 257d 0a3c 2f73 6372 6970 743e  for %}.</script>
+000000f0: 2020 2020 2020 2020 3c64 6976 2063 6c61          <div cla
+00000100: 7373 3d22 666f 726d 2d67 726f 7570 223e  ss="form-group">
+00000110: 0a20 2020 2020 2020 2020 2020 203c 6c61  .            <la
+00000120: 6265 6c20 636c 6173 733d 2263 6f6e 7472  bel class="contr
+00000130: 6f6c 2d6c 6162 656c 2063 6f6c 2d6d 642d  ol-label col-md-
+00000140: 3322 3e46 6972 7374 2064 6179 206f 6620  3">First day of 
+00000150: 7468 6520 7765 656b 3c2f 6c61 6265 6c3e  the week</label>
+00000160: 0a20 2020 2020 2020 2020 2020 203c 6469  .            <di
+00000170: 7620 636c 6173 733d 2263 6f6c 2d6d 642d  v class="col-md-
+00000180: 3922 3e0a 2020 2020 2020 2020 2020 2020  9">.            
+00000190: 2020 2020 3c64 6976 2063 6c61 7373 3d22      <div class="
+000001a0: 7261 6469 6f22 3e0a 2020 2020 2020 2020  radio">.        
+000001b0: 2020 2020 2020 2020 2020 2020 3c6c 6162              <lab
+000001c0: 656c 3e0a 2020 2020 2020 2020 2020 2020  el>.            
+000001d0: 2020 2020 2020 2020 2020 2020 3c69 6e70              <inp
+000001e0: 7574 2074 7970 653d 2272 6164 696f 220a  ut type="radio".
+000001f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000200: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00000210: 643d 2272 6570 6f72 7473 5f66 6972 7374  d="reports_first
+00000220: 5f64 6179 5f6f 665f 7765 656b 220a 2020  _day_of_week".  
+00000230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000240: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00000250: 653d 2272 6570 6f72 7473 5f66 6972 7374  e="reports_first
+00000260: 5f64 6179 5f6f 665f 7765 656b 220a 2020  _day_of_week".  
+00000270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000280: 2020 2020 2020 2020 2020 2020 207b 2520               {% 
+00000290: 6966 206e 6f74 2072 6570 6f72 7473 5f66  if not reports_f
+000002a0: 6972 7374 5f64 6179 5f6f 665f 7765 656b  irst_day_of_week
+000002b0: 206f 7220 7265 706f 7274 735f 6669 7273   or reports_firs
+000002c0: 745f 6461 795f 6f66 5f77 6565 6b20 3d3d  t_day_of_week ==
+000002d0: 2027 3127 2025 7d63 6865 636b 6564 7b25   '1' %}checked{%
+000002e0: 2065 6e64 6966 2025 7d0a 2020 2020 2020   endif %}.      
+000002f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000300: 2020 2020 2020 2020 2076 616c 7565 3d22           value="
+00000310: 3122 3e0a 2020 2020 2020 2020 2020 2020  1">.            
+00000320: 2020 2020 2020 2020 2020 2020 4d6f 6e64              Mond
+00000330: 6179 0a20 2020 2020 2020 2020 2020 2020  ay.             
+00000340: 2020 2020 2020 203c 2f6c 6162 656c 3e0a         </label>.
+00000350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000360: 2020 2020 3c6c 6162 656c 3e0a 2020 2020      <label>.    
+00000370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000380: 2020 2020 3c69 6e70 7574 2074 7970 653d      <input type=
+00000390: 2272 6164 696f 220a 2020 2020 2020 2020  "radio".        
+000003a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000003b0: 2020 2020 2020 2069 643d 2272 6570 6f72         id="repor
+000003c0: 7473 5f66 6972 7374 5f64 6179 5f6f 665f  ts_first_day_of_
+000003d0: 7765 656b 220a 2020 2020 2020 2020 2020  week".          
+000003e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000003f0: 2020 2020 206e 616d 653d 2272 6570 6f72       name="repor
+00000400: 7473 5f66 6972 7374 5f64 6179 5f6f 665f  ts_first_day_of_
+00000410: 7765 656b 220a 2020 2020 2020 2020 2020  week".          
+00000420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000430: 2020 2020 207b 2520 6966 2072 6570 6f72       {% if repor
+00000440: 7473 5f66 6972 7374 5f64 6179 5f6f 665f  ts_first_day_of_
+00000450: 7765 656b 203d 3d20 2730 2720 257d 6368  week == '0' %}ch
+00000460: 6563 6b65 647b 2520 656e 6469 6620 257d  ecked{% endif %}
+00000470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000490: 7661 6c75 653d 2230 223e 0a20 2020 2020  value="0">.     
+000004a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000004b0: 2020 2053 756e 6461 790a 2020 2020 2020     Sunday.      
+000004c0: 2020 2020 2020 2020 2020 2020 2020 3c2f                </
+000004d0: 6c61 6265 6c3e 0a20 2020 2020 2020 2020  label>.         
+000004e0: 2020 2020 2020 203c 2f64 6976 3e0a 2020         </div>.  
+000004f0: 2020 2020 2020 2020 2020 3c2f 6469 763e            </div>
+00000500: 0a20 2020 2020 2020 203c 2f64 6976 3e0a  .        </div>.
+00000510: 2020 2020 2020 2020 3c64 6976 2063 6c61          <div cla
+00000520: 7373 3d22 666f 726d 2d67 726f 7570 223e  ss="form-group">
+00000530: 0a20 2020 2020 2020 2020 2020 203c 6c61  .            <la
+00000540: 6265 6c20 636c 6173 733d 2263 6f6e 7472  bel class="contr
+00000550: 6f6c 2d6c 6162 656c 2063 6f6c 2d6d 642d  ol-label col-md-
+00000560: 3322 2066 6f72 3d22 7265 706f 7274 735f  3" for="reports_
+00000570: 6465 6661 756c 745f 6461 7465 7261 6e67  default_daterang
+00000580: 6522 3e44 6566 6175 6c74 2064 6174 6572  e">Default dater
+00000590: 616e 6765 3c2f 6c61 6265 6c3e 0a20 2020  ange</label>.   
+000005a0: 2020 2020 2020 2020 203c 6469 7620 636c           <div cl
+000005b0: 6173 733d 2263 6f6c 2d6d 642d 3922 3e0a  ass="col-md-9">.
+000005c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000005d0: 3c64 6976 2063 6c61 7373 3d22 7261 6469  <div class="radi
+000005e0: 6f22 3e0a 2020 2020 2020 2020 2020 2020  o">.            
+000005f0: 2020 2020 2020 2020 3c6c 6162 656c 3e0a          <label>.
+00000600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000610: 2020 2020 2020 2020 3c69 6e70 7574 2074          <input t
+00000620: 7970 653d 2272 6164 696f 220a 2020 2020  ype="radio".    
+00000630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000640: 2020 2020 2020 2020 2020 2069 643d 2272             id="r
+00000650: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
+00000660: 6174 6572 616e 6765 220a 2020 2020 2020  aterange".      
+00000670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000680: 2020 2020 2020 2020 206e 616d 653d 2272           name="r
+00000690: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
+000006a0: 6174 6572 616e 6765 220a 2020 2020 2020  aterange".      
+000006b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000006c0: 2020 2020 2020 2020 207b 2520 6966 206e           {% if n
+000006d0: 6f74 2072 6570 6f72 7473 5f64 6566 6175  ot reports_defau
+000006e0: 6c74 5f64 6174 6572 616e 6765 2025 7d63  lt_daterange %}c
+000006f0: 6865 636b 6564 7b25 2065 6e64 6966 2025  hecked{% endif %
+00000700: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00000710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000720: 2076 616c 7565 3d22 223e 0a20 2020 2020   value="">.     
+00000730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000740: 2020 2054 6f64 6179 0a20 2020 2020 2020     Today.       
+00000750: 2020 2020 2020 2020 2020 2020 203c 2f6c               </l
+00000760: 6162 656c 3e0a 2020 2020 2020 2020 2020  abel>.          
+00000770: 2020 2020 2020 2020 2020 3c6c 6162 656c            <label
+00000780: 3e0a 2020 2020 2020 2020 2020 2020 2020  >.              
+00000790: 2020 2020 2020 2020 2020 3c69 6e70 7574            <input
+000007a0: 2074 7970 653d 2272 6164 696f 220a 2020   type="radio".  
+000007b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000007c0: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+000007d0: 653d 2272 6570 6f72 7473 5f64 6566 6175  e="reports_defau
+000007e0: 6c74 5f64 6174 6572 616e 6765 220a 2020  lt_daterange".  
+000007f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000800: 2020 2020 2020 2020 2020 2020 207b 2520               {% 
+00000810: 6966 2072 6570 6f72 7473 5f64 6566 6175  if reports_defau
+00000820: 6c74 5f64 6174 6572 616e 6765 203d 3d20  lt_daterange == 
+00000830: 2779 6573 7465 7264 6179 2720 257d 6368  'yesterday' %}ch
+00000840: 6563 6b65 647b 2520 656e 6469 6620 257d  ecked{% endif %}
+00000850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000870: 7661 6c75 653d 2279 6573 7465 7264 6179  value="yesterday
+00000880: 223e 0a20 2020 2020 2020 2020 2020 2020  ">.             
+00000890: 2020 2020 2020 2020 2020 2059 6573 7465             Yeste
+000008a0: 7264 6179 0a20 2020 2020 2020 2020 2020  rday.           
+000008b0: 2020 2020 2020 2020 203c 2f6c 6162 656c           </label
+000008c0: 3e0a 2020 2020 2020 2020 2020 2020 2020  >.              
+000008d0: 2020 2020 2020 3c6c 6162 656c 3e0a 2020        <label>.  
+000008e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000008f0: 2020 2020 2020 3c69 6e70 7574 2074 7970        <input typ
+00000900: 653d 2272 6164 696f 220a 2020 2020 2020  e="radio".      
+00000910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000920: 2020 2020 2020 2020 206e 616d 653d 2272           name="r
+00000930: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
+00000940: 6174 6572 616e 6765 220a 2020 2020 2020  aterange".      
+00000950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000960: 2020 2020 2020 2020 207b 2520 6966 2072           {% if r
+00000970: 6570 6f72 7473 5f64 6566 6175 6c74 5f64  eports_default_d
+00000980: 6174 6572 616e 6765 203d 3d20 2774 6869  aterange == 'thi
+00000990: 735f 7765 656b 2720 257d 6368 6563 6b65  s_week' %}checke
+000009a0: 647b 2520 656e 6469 6620 257d 0a20 2020  d{% endif %}.   
+000009b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000009c0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+000009d0: 653d 2274 6869 735f 7765 656b 223e 0a20  e="this_week">. 
+000009e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000009f0: 2020 2020 2020 2054 6869 7320 7765 656b         This week
+00000a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000a10: 2020 2020 203c 2f6c 6162 656c 3e0a 2020       </label>.  
+00000a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000a30: 2020 3c6c 6162 656c 3e0a 2020 2020 2020    <label>.      
+00000a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000a50: 2020 3c69 6e70 7574 2074 7970 653d 2272    <input type="r
+00000a60: 6164 696f 220a 2020 2020 2020 2020 2020  adio".          
+00000a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000a80: 2020 2020 206e 616d 653d 2272 6570 6f72       name="repor
+00000a90: 7473 5f64 6566 6175 6c74 5f64 6174 6572  ts_default_dater
+00000aa0: 616e 6765 220a 2020 2020 2020 2020 2020  ange".          
+00000ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ac0: 2020 2020 207b 2520 6966 2072 6570 6f72       {% if repor
+00000ad0: 7473 5f64 6566 6175 6c74 5f64 6174 6572  ts_default_dater
+00000ae0: 616e 6765 203d 3d20 2774 6869 735f 6d6f  ange == 'this_mo
+00000af0: 6e74 6827 2025 7d63 6865 636b 6564 7b25  nth' %}checked{%
+00000b00: 2065 6e64 6966 2025 7d0a 2020 2020 2020   endif %}.      
+00000b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000b20: 2020 2020 2020 2020 2076 616c 7565 3d22           value="
+00000b30: 7468 6973 5f6d 6f6e 7468 223e 0a20 2020  this_month">.   
+00000b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000b50: 2020 2020 2054 6869 7320 6d6f 6e74 680a       This month.
+00000b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000b70: 2020 2020 3c2f 6c61 6265 6c3e 0a20 2020      </label>.   
+00000b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000b90: 203c 6c61 6265 6c3e 0a20 2020 2020 2020   <label>.       
+00000ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000bb0: 203c 696e 7075 7420 7479 7065 3d22 7261   <input type="ra
+00000bc0: 6469 6f22 0a20 2020 2020 2020 2020 2020  dio".           
+00000bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000be0: 2020 2020 6e61 6d65 3d22 7265 706f 7274      name="report
+00000bf0: 735f 6465 6661 756c 745f 6461 7465 7261  s_default_datera
+00000c00: 6e67 6522 0a20 2020 2020 2020 2020 2020  nge".           
+00000c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c20: 2020 2020 7b25 2069 6620 7265 706f 7274      {% if report
+00000c30: 735f 6465 6661 756c 745f 6461 7465 7261  s_default_datera
+00000c40: 6e67 6520 3d3d 2027 7468 6973 5f79 6561  nge == 'this_yea
+00000c50: 7227 2025 7d63 6865 636b 6564 7b25 2065  r' %}checked{% e
+00000c60: 6e64 6966 2025 7d0a 2020 2020 2020 2020  ndif %}.        
+00000c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c80: 2020 2020 2020 2076 616c 7565 3d22 7468         value="th
+00000c90: 6973 5f79 6561 7222 3e0a 2020 2020 2020  is_year">.      
+00000ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cb0: 2020 5468 6973 2079 6561 720a 2020 2020    This year.    
+00000cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cd0: 3c2f 6c61 6265 6c3e 0a20 2020 2020 2020  </label>.       
+00000ce0: 2020 2020 2020 2020 203c 2f64 6976 3e0a           </div>.
+00000cf0: 2020 2020 2020 2020 2020 2020 3c2f 6469              </di
+00000d00: 763e 0a20 2020 2020 2020 203c 2f64 6976  v>.        </div
+00000d10: 3e0a 2020 2020 2020 2020 3c64 6976 2063  >.        <div c
+00000d20: 6c61 7373 3d22 666f 726d 2d67 726f 7570  lass="form-group
+00000d30: 207b 2520 6966 2065 7272 6f72 732e 7265   {% if errors.re
+00000d40: 706f 7274 735f 7469 6d65 6465 6c74 615f  ports_timedelta_
+00000d50: 666f 726d 6174 2025 7d68 6173 2d65 7272  format %}has-err
+00000d60: 6f72 7b25 2065 6e64 6966 2025 7d22 3e0a  or{% endif %}">.
+00000d70: 2020 2020 2020 2020 2020 2020 3c6c 6162              <lab
+00000d80: 656c 2063 6c61 7373 3d22 636f 6e74 726f  el class="contro
+00000d90: 6c2d 6c61 6265 6c20 636f 6c2d 6d64 2d33  l-label col-md-3
+00000da0: 2220 666f 723d 2272 6570 6f72 7473 5f74  " for="reports_t
+00000db0: 696d 6564 656c 7461 5f66 6f72 6d61 7422  imedelta_format"
+00000dc0: 3e44 7572 6174 696f 6e20 666f 726d 6174  >Duration format
+00000dd0: 3c2f 6c61 6265 6c3e 0a20 2020 2020 2020  </label>.       
+00000de0: 2020 2020 203c 6469 7620 636c 6173 733d       <div class=
+00000df0: 2263 6f6c 2d6d 642d 3722 3e0a 2020 2020  "col-md-7">.    
+00000e00: 2020 2020 2020 2020 2020 2020 3c69 6e70              <inp
+00000e10: 7574 206e 616d 653d 2272 6570 6f72 7473  ut name="reports
+00000e20: 5f74 696d 6564 656c 7461 5f66 6f72 6d61  _timedelta_forma
+00000e30: 7422 0a20 2020 2020 2020 2020 2020 2020  t".             
+00000e40: 2020 2020 2020 2020 2020 6964 3d22 7265            id="re
+00000e50: 706f 7274 735f 7469 6d65 6465 6c74 615f  ports_timedelta_
+00000e60: 666f 726d 6174 220a 2020 2020 2020 2020  format".        
+00000e70: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00000e80: 7970 653d 2274 6578 7422 0a20 2020 2020  ype="text".     
+00000e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ea0: 2020 6175 746f 636f 6d70 6c65 7465 3d22    autocomplete="
+00000eb0: 6f66 6622 0a20 2020 2020 2020 2020 2020  off".           
+00000ec0: 2020 2020 2020 2020 2020 2020 636c 6173              clas
+00000ed0: 733d 2266 6f72 6d2d 636f 6e74 726f 6c22  s="form-control"
+00000ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000ef0: 2020 2020 2020 2020 7661 6c75 653d 227b          value="{
+00000f00: 7b20 7265 706f 7274 735f 7469 6d65 6465  { reports_timede
+00000f10: 6c74 615f 666f 726d 6174 207d 7d22 3e0a  lta_format }}">.
+00000f20: 2020 2020 2020 2020 2020 2020 3c2f 6469              </di
+00000f30: 763e 0a20 2020 2020 2020 2020 2020 207b  v>.            {
+00000f40: 2520 6966 2065 7272 6f72 732e 7265 706f  % if errors.repo
+00000f50: 7274 735f 7469 6d65 6465 6c74 615f 666f  rts_timedelta_fo
+00000f60: 726d 6174 2025 7d0a 2020 2020 2020 2020  rmat %}.        
+00000f70: 2020 2020 2020 2020 3c64 6976 2063 6c61          <div cla
+00000f80: 7373 3d22 636f 6c2d 6d64 2d6f 6666 7365  ss="col-md-offse
+00000f90: 742d 3320 636f 6c2d 6d64 2d39 2068 656c  t-3 col-md-9 hel
+00000fa0: 702d 626c 6f63 6b20 6c69 6768 742d 6772  p-block light-gr
+00000fb0: 6579 223e 7b7b 2065 7272 6f72 732e 7265  ey">{{ errors.re
+00000fc0: 706f 7274 735f 7469 6d65 6465 6c74 615f  ports_timedelta_
+00000fd0: 666f 726d 6174 2e65 7272 6f72 207d 7d3c  format.error }}<
+00000fe0: 2f64 6976 3e0a 2020 2020 2020 2020 2020  /div>.          
+00000ff0: 2020 7b25 2065 6e64 6966 2025 7d0a 2020    {% endif %}.  
+00001000: 2020 2020 2020 2020 2020 3c64 6976 2063            <div c
+00001010: 6c61 7373 3d22 636f 6c2d 6d64 2d6f 6666  lass="col-md-off
+00001020: 7365 742d 3320 636f 6c2d 6d64 2d37 2068  set-3 col-md-7 h
+00001030: 656c 702d 626c 6f63 6b22 3e0a 2020 2020  elp-block">.    
+00001040: 2020 2020 2020 2020 2020 2020 4578 616d              Exam
+00001050: 706c 6573 2028 7468 6520 6c61 7374 2066  ples (the last f
+00001060: 6965 6c64 206e 6565 6473 2074 6f20 6265  ield needs to be
+00001070: 2066 6f72 6d61 7474 6564 2061 7320 6120   formatted as a 
+00001080: 666c 6f61 7429 3a0a 2020 2020 2020 2020  float):.        
+00001090: 2020 2020 2020 2020 3c70 7265 2073 7479          <pre sty
+000010a0: 6c65 3d22 7768 6974 652d 7370 6163 653a  le="white-space:
+000010b0: 2070 7265 2d77 7261 703b 223e 7b44 3a30   pre-wrap;">{D:0
+000010c0: 327d 6420 7b48 3a30 327d 6820 7b4d 3a30  2}d {H:02}h {M:0
+000010d0: 327d 6d20 7b53 3a30 322e 3066 7d73 202d  2}m {S:02.0f}s -
+000010e0: 2d3e 2030 3564 2030 3868 2030 346d 2030  -> 05d 08h 04m 0
+000010f0: 3273 3c62 723e 7b57 7d77 207b 447d 6420  2s<br>{W}w {D}d 
+00001100: 7b48 7d3a 7b4d 3a30 327d 3a7b 533a 3032  {H}:{M:02}:{S:02
+00001110: 2e30 667d 2020 2020 202d 2d3e 2034 7720  .0f}     --> 4w 
+00001120: 3564 2038 3a30 343a 3032 3c62 723e 7b48  5d 8:04:02<br>{H
+00001130: 7d68 207b 533a 2e30 667d 7320 2020 2020  }h {S:.0f}s     
+00001140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001150: 202d 2d3e 2037 3268 2038 3030 733c 6272   --> 72h 800s<br
+00001160: 3e7b 483a 2e31 667d 6820 2020 2020 2020  >{H:.1f}h       
+00001170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001180: 2020 2020 2d2d 3e20 3732 2e32 683c 6272      --> 72.2h<br
+00001190: 3e7b 483a 2e32 667d 6820 2020 2020 2020  >{H:.2f}h       
+000011a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000011b0: 2020 2020 2d2d 3e20 3732 2e32 3568 3c2f      --> 72.25h</
+000011c0: 7072 653e 0a20 2020 2020 2020 2020 2020  pre>.           
+000011d0: 203c 2f64 6976 3e0a 2020 2020 2020 2020   </div>.        
+000011e0: 3c2f 6469 763e 0a20 2020 2020 2020 203c  </div>.        <
+000011f0: 6469 7620 636c 6173 733d 2266 6f72 6d2d  div class="form-
+00001200: 6772 6f75 7020 7b25 2069 6620 6572 726f  group {% if erro
+00001210: 7273 2e72 6570 6f72 7473 5f65 7863 6c75  rs.reports_exclu
+00001220: 6465 5f70 726f 6a65 6374 7320 257d 6861  de_projects %}ha
+00001230: 732d 6572 726f 727b 2520 656e 6469 6620  s-error{% endif 
+00001240: 257d 223e 0a20 2020 2020 2020 2020 2020  %}">.           
+00001250: 203c 6c61 6265 6c20 636c 6173 733d 2263   <label class="c
+00001260: 6f6e 7472 6f6c 2d6c 6162 656c 2063 6f6c  ontrol-label col
+00001270: 2d6d 642d 3322 2066 6f72 3d22 6578 636c  -md-3" for="excl
+00001280: 7564 655f 7072 6f6a 6563 7422 3e45 7863  ude_project">Exc
+00001290: 6c75 6465 6420 7072 6f6a 6563 7473 3c2f  luded projects</
+000012a0: 6c61 6265 6c3e 0a20 2020 2020 2020 2020  label>.         
+000012b0: 2020 207b 2520 6966 2022 4e45 4d4f 5f62     {% if "NEMO_b
+000012c0: 696c 6c69 6e67 227c 6170 705f 696e 7374  illing"|app_inst
+000012d0: 616c 6c65 6420 257d 0a20 2020 2020 2020  alled %}.       
+000012e0: 2020 2020 2020 2020 203c 6469 7620 636c           <div cl
+000012f0: 6173 733d 2263 6f6c 2d6d 642d 3722 3e0a  ass="col-md-7">.
+00001300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001310: 2020 2020 3c64 6976 2063 6c61 7373 3d22      <div class="
+00001320: 6368 6563 6b62 6f78 223e 0a20 2020 2020  checkbox">.     
+00001330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001340: 2020 203c 6c61 6265 6c3e 0a20 2020 2020     <label>.     
+00001350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001360: 2020 2020 2020 203c 696e 7075 7420 7479         <input ty
+00001370: 7065 3d22 6368 6563 6b62 6f78 220a 2020  pe="checkbox".  
+00001380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013a0: 2069 643d 2272 6570 6f72 7473 5f65 7863   id="reports_exc
+000013b0: 6c75 6465 5f6e 6f5f 6368 6172 6765 5f70  lude_no_charge_p
+000013c0: 726f 6a65 6374 7322 0a20 2020 2020 2020  rojects".       
+000013d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013e0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+000013f0: 3d22 7265 706f 7274 735f 6578 636c 7564  ="reports_exclud
+00001400: 655f 6e6f 5f63 6861 7267 655f 7072 6f6a  e_no_charge_proj
+00001410: 6563 7473 220a 2020 2020 2020 2020 2020  ects".          
+00001420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001430: 2020 2020 2020 2020 207b 2520 6966 2072           {% if r
+00001440: 6570 6f72 7473 5f65 7863 6c75 6465 5f6e  eports_exclude_n
+00001450: 6f5f 6368 6172 6765 5f70 726f 6a65 6374  o_charge_project
+00001460: 7320 257d 6368 6563 6b65 647b 2520 656e  s %}checked{% en
+00001470: 6469 6620 257d 0a20 2020 2020 2020 2020  dif %}.         
+00001480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001490: 2020 2020 2020 2020 2020 7661 6c75 653d            value=
+000014a0: 2265 6e61 626c 6564 223e 0a20 2020 2020  "enabled">.     
+000014b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000014c0: 2020 2020 2020 2045 7863 6c75 6465 206e         Exclude n
+000014d0: 6f20 6368 6172 6765 2070 726f 6a65 6374  o charge project
+000014e0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+000014f0: 2020 2020 2020 2020 2020 3c2f 6c61 6265            </labe
+00001500: 6c3e 0a20 2020 2020 2020 2020 2020 2020  l>.             
+00001510: 2020 2020 2020 2020 2020 203c 6272 3e0a             <br>.
+00001520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001530: 2020 2020 2020 2020 3c62 723e 0a20 2020          <br>.   
+00001540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001550: 203c 2f64 6976 3e0a 2020 2020 2020 2020   </div>.        
+00001560: 2020 2020 2020 2020 3c2f 6469 763e 0a20          </div>. 
+00001570: 2020 2020 2020 2020 2020 207b 2520 656e             {% en
+00001580: 6469 6620 257d 0a20 2020 2020 2020 2020  dif %}.         
+00001590: 2020 203c 6469 7620 636c 6173 733d 2263     <div class="c
+000015a0: 6f6c 2d6d 642d 3720 7b25 2069 6620 224e  ol-md-7 {% if "N
+000015b0: 454d 4f5f 6269 6c6c 696e 6722 7c61 7070  EMO_billing"|app
+000015c0: 5f69 6e73 7461 6c6c 6564 2025 7d63 6f6c  _installed %}col
+000015d0: 2d6d 642d 6f66 6673 6574 2d33 7b25 2065  -md-offset-3{% e
+000015e0: 6e64 6966 2025 7d22 3e0a 2020 2020 2020  ndif %}">.      
+000015f0: 2020 2020 2020 2020 2020 3c69 6e70 7574            <input
+00001600: 2069 643d 2265 7863 6c75 6465 5f70 726f   id="exclude_pro
+00001610: 6a65 6374 220a 2020 2020 2020 2020 2020  ject".          
+00001620: 2020 2020 2020 2020 2020 2020 2074 7970               typ
+00001630: 653d 2274 6578 7422 0a20 2020 2020 2020  e="text".       
+00001640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001650: 6175 746f 636f 6d70 6c65 7465 3d22 6f66  autocomplete="of
+00001660: 6622 0a20 2020 2020 2020 2020 2020 2020  f".             
+00001670: 2020 2020 2020 2020 2020 636c 6173 733d            class=
+00001680: 2266 6f72 6d2d 636f 6e74 726f 6c22 0a20  "form-control". 
+00001690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016a0: 2020 2020 2020 706c 6163 6568 6f6c 6465        placeholde
+000016b0: 723d 2253 6561 7263 6820 666f 7220 6120  r="Search for a 
+000016c0: 7072 6f6a 6563 7420 746f 2065 7863 6c75  project to exclu
+000016d0: 6465 223e 0a20 2020 2020 2020 2020 2020  de">.           
+000016e0: 203c 2f64 6976 3e0a 2020 2020 2020 2020   </div>.        
+000016f0: 2020 2020 7b25 2069 6620 6572 726f 7273      {% if errors
+00001700: 2e72 6570 6f72 7473 5f65 7863 6c75 6465  .reports_exclude
+00001710: 5f70 726f 6a65 6374 7320 257d 0a20 2020  _projects %}.   
+00001720: 2020 2020 2020 2020 2020 2020 203c 6469               <di
+00001730: 7620 636c 6173 733d 2263 6f6c 2d6d 642d  v class="col-md-
+00001740: 6f66 6673 6574 2d33 2063 6f6c 2d6d 642d  offset-3 col-md-
+00001750: 3920 6865 6c70 2d62 6c6f 636b 206c 6967  9 help-block lig
+00001760: 6874 2d67 7265 7922 3e7b 7b20 6572 726f  ht-grey">{{ erro
+00001770: 7273 2e72 6570 6f72 7473 5f65 7863 6c75  rs.reports_exclu
+00001780: 6465 5f70 726f 6a65 6374 732e 6572 726f  de_projects.erro
+00001790: 7220 7d7d 3c2f 6469 763e 0a20 2020 2020  r }}</div>.     
+000017a0: 2020 2020 2020 207b 2520 656e 6469 6620         {% endif 
+000017b0: 257d 0a20 2020 2020 2020 203c 2f64 6976  %}.        </div
+000017c0: 3e0a 2020 2020 2020 2020 3c64 6976 2063  >.        <div c
+000017d0: 6c61 7373 3d22 666f 726d 2d67 726f 7570  lass="form-group
+000017e0: 223e 0a20 2020 2020 2020 2020 2020 203c  ">.            <
+000017f0: 6469 7620 6964 3d22 6578 636c 7564 652d  div id="exclude-
+00001800: 6c69 7374 2220 636c 6173 733d 2263 6f6c  list" class="col
+00001810: 2d6d 642d 6f66 6673 6574 2d33 2063 6f6c  -md-offset-3 col
+00001820: 2d6d 642d 3422 3e4e 6f20 7072 6f6a 6563  -md-4">No projec
+00001830: 7473 2061 7265 2065 7863 6c75 6465 642e  ts are excluded.
+00001840: 3c2f 6469 763e 0a20 2020 2020 2020 203c  </div>.        <
+00001850: 2f64 6976 3e0a 2020 2020 2020 2020 3c64  /div>.        <d
+00001860: 6976 2063 6c61 7373 3d22 6375 7374 6f6d  iv class="custom
+00001870: 697a 6174 696f 6e2d 7365 7061 7261 7469  ization-separati
+00001880: 6f6e 223e 3c2f 6469 763e 0a20 2020 2020  on"></div>.     
+00001890: 2020 203c 6469 7620 636c 6173 733d 2266     <div class="f
+000018a0: 6f72 6d2d 6772 6f75 7022 3e0a 2020 2020  orm-group">.    
+000018b0: 2020 2020 2020 2020 3c64 6976 2063 6c61          <div cla
+000018c0: 7373 3d22 7465 7874 2d63 656e 7465 7222  ss="text-center"
+000018d0: 3e7b 2520 6275 7474 6f6e 2074 7970 653d  >{% button type=
+000018e0: 2273 6176 6522 2076 616c 7565 3d22 5361  "save" value="Sa
+000018f0: 7665 2073 6574 7469 6e67 7322 2025 7d3c  ve settings" %}<
+00001900: 2f64 6976 3e0a 2020 2020 2020 2020 3c2f  /div>.        </
+00001910: 6469 763e 0a20 2020 203c 2f66 6f72 6d3e  div>.    </form>
+00001920: 0a3c 2f64 6976 3e0a 3c73 6372 6970 743e  .</div>.<script>
+00001930: 0a09 6675 6e63 7469 6f6e 2061 6464 5f70  ..function add_p
+00001940: 726f 6a65 6374 286a 7175 6572 795f 6576  roject(jquery_ev
+00001950: 656e 742c 2073 6561 7263 685f 7365 6c65  ent, search_sele
+00001960: 6374 696f 6e2c 2064 6174 6173 6574 5f6e  ction, dataset_n
+00001970: 616d 6529 0a09 7b0a 2020 2020 2020 2020  ame)..{.        
+00001980: 2428 7468 6973 292e 7479 7065 6168 6561  $(this).typeahea
+00001990: 6428 2776 616c 272c 2027 2729 2e66 6f63  d('val', '').foc
+000019a0: 7573 2829 3b0a 0909 6164 645f 746f 5f6c  us();...add_to_l
+000019b0: 6973 7428 2223 6578 636c 7564 652d 6c69  ist("#exclude-li
+000019c0: 7374 222c 2022 7265 6d6f 7665 5f70 726f  st", "remove_pro
+000019d0: 6a65 6374 222c 2073 6561 7263 685f 7365  ject", search_se
+000019e0: 6c65 6374 696f 6e2e 6964 2c20 7365 6172  lection.id, sear
+000019f0: 6368 5f73 656c 6563 7469 6f6e 2e6e 616d  ch_selection.nam
+00001a00: 652c 2022 5265 6d6f 7665 2022 202b 2073  e, "Remove " + s
+00001a10: 6561 7263 685f 7365 6c65 6374 696f 6e2e  earch_selection.
+00001a20: 6e61 6d65 2c20 2272 6570 6f72 7473 5f65  name, "reports_e
+00001a30: 7863 6c75 6465 5f70 726f 6a65 6374 735f  xclude_projects_
+00001a40: 6c69 7374 2229 3b0a 097d 0a20 2020 2066  list");..}.    f
+00001a50: 756e 6374 696f 6e20 7265 6d6f 7665 5f70  unction remove_p
+00001a60: 726f 6a65 6374 2870 726f 6a65 6374 5f69  roject(project_i
+00001a70: 6429 0a09 7b0a 0909 7265 6d6f 7665 5f66  d)..{...remove_f
+00001a80: 726f 6d5f 6c69 7374 2822 2365 7863 6c75  rom_list("#exclu
+00001a90: 6465 2d6c 6973 7422 2c20 2223 7265 706f  de-list", "#repo
+00001aa0: 7274 735f 6578 636c 7564 655f 7072 6f6a  rts_exclude_proj
+00001ab0: 6563 7473 5f6c 6973 745f 2220 2b20 7072  ects_list_" + pr
+00001ac0: 6f6a 6563 745f 6964 2c20 224e 6f20 7072  oject_id, "No pr
+00001ad0: 6f6a 6563 7473 2061 7265 2065 7863 6c75  ojects are exclu
+00001ae0: 6465 642e 2229 3b0a 097d 0a09 2428 2723  ded.");..}..$('#
+00001af0: 6578 636c 7564 655f 7072 6f6a 6563 7427  exclude_project'
+00001b00: 292e 6175 746f 636f 6d70 6c65 7465 2827  ).autocomplete('
+00001b10: 7072 6f6a 6563 7473 272c 2061 6464 5f70  projects', add_p
+00001b20: 726f 6a65 6374 2c20 7b7b 2070 726f 6a65  roject, {{ proje
+00001b30: 6374 737c 6a73 6f6e 5f73 6561 7263 685f  cts|json_search_
+00001b40: 6261 7365 207d 7d29 3b0a 2020 2020 7b25  base }});.    {%
+00001b50: 2066 6f72 2070 726f 6a65 6374 2069 6e20   for project in 
+00001b60: 7365 6c65 6374 6564 5f70 726f 6a65 6374  selected_project
+00001b70: 7320 257d 0a09 0961 6464 5f70 726f 6a65  s %}...add_proje
+00001b80: 6374 2875 6e64 6566 696e 6564 2c20 7b6e  ct(undefined, {n
+00001b90: 616d 653a 277b 7b20 7072 6f6a 6563 742e  ame:'{{ project.
+00001ba0: 6e61 6d65 207d 7d27 2c20 6964 3a7b 7b20  name }}', id:{{ 
+00001bb0: 7072 6f6a 6563 742e 6964 207d 7d7d 293b  project.id }}});
+00001bc0: 0a09 7b25 2065 6e64 666f 7220 257d 0a3c  ..{% endfor %}.<
+00001bd0: 2f73 6372 6970 743e 0a                   /script>.
```

## NEMO_reports/views/reporting.py

```diff
@@ -23,15 +23,15 @@
     capitalize,
     end_of_the_day,
     export_format_datetime,
     extract_optional_beginning_and_end_dates,
 )
 from dateutil.relativedelta import relativedelta
 from dateutil.rrule import MONTHLY, rrule
-from django.db.models import BooleanField, Case, F, Value, When
+from django.db.models import BooleanField, Case, F, Q, Value, When
 from django.http import HttpRequest, HttpResponse
 from django.shortcuts import render
 from django.utils.formats import number_format
 from django.utils.safestring import mark_safe
 from django.views.decorators.http import require_GET
 
 from NEMO_reports.customizations import ReportsCustomization
@@ -228,91 +228,79 @@
 def reporting_dictionary(key: str, parameters: ReportingParameters, dictionary: Dict):
     # Adds report information (url, title, description...) and parameters to the given dictionary
     return {**get_report_dict().get(key), **parameters.get_dict(), **dictionary}
 
 
 def usage_events(start, end) -> QuerySetType[UsageEvent]:
     queryset = UsageEvent.objects.filter(end__date__gte=start, end__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(
         remote=Case(When(remote_work=True, then=True), default=False, output_field=BooleanField())
     )
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_id=F("tool__core_rel__core_facility"),
             core_facility_name=F("tool__core_rel__core_facility__name"),
         )
     return queryset
 
 
 def area_access(start, end) -> QuerySetType[AreaAccessRecord]:
     queryset = AreaAccessRecord.objects.filter(end__date__gte=start, end__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(
         remote=Case(When(staff_charge__isnull=False, then=True), default=False, output_field=BooleanField())
     )
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_id=F("area__core_rel__core_facility"),
             core_facility_name=F("area__core_rel__core_facility__name"),
         )
     return queryset
 
 
 def staff_charges(start, end) -> QuerySetType[StaffCharge]:
     queryset = StaffCharge.objects.filter(end__date__gte=start, end__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(remote=Value(True, output_field=BooleanField()))
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_id=F("core_rel__core_facility"),
             core_facility_name=F("core_rel__core_facility__name"),
         )
     return queryset
 
 
 def consumable_withdraws(start, end) -> QuerySetType[ConsumableWithdraw]:
     queryset = ConsumableWithdraw.objects.filter(date__date__gte=start, date__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(remote=Value(False, output_field=BooleanField()))
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_id=F("consumable__core_rel__core_facility"),
             core_facility_name=F("consumable__core_rel__core_facility__name"),
         )
     return queryset
 
 
 def training_sessions(start, end) -> QuerySetType[TrainingSession]:
     queryset = TrainingSession.objects.filter(date__date__gte=start, date__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(remote=Value(False, output_field=BooleanField()))
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_id=F("tool__core_rel__core_facility"),
             core_facility_name=F("tool__core_rel__core_facility__name"),
         )
     return queryset
 
 
 def missed_reservations(start, end) -> QuerySetType[Reservation]:
     queryset = Reservation.objects.filter(missed=True, end__date__gte=start, end__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(remote=Value(False, output_field=BooleanField()))
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_id=Case(
                 When(tool__isnull=False, then=F("tool__core_rel__core_facility")),
                 When(area__isnull=False, then=F("area__core_rel__core_facility")),
                 default=None,
@@ -326,17 +314,15 @@
     return queryset
 
 
 def custom_charges(start, end) -> QuerySetType:
     from NEMO_billing.models import CustomCharge
 
     queryset = CustomCharge.objects.filter(date__date__gte=start, date__date__lte=end)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        queryset = queryset.exclude(project_id__in=projects_to_exclude)
+    queryset = queryset.exclude(get_project_charges_filter())
     queryset = queryset.annotate(remote=Value(False, output_field=BooleanField()))
     if get_core_facility() and get_core_facility().objects.exists():
         queryset = queryset.annotate(
             core_facility_name=F("core_facility__name"),
         )
     return queryset
 
@@ -400,14 +386,26 @@
             if is_last_field:
                 values[field] = remainder / constants[field]
             else:
                 values[field], remainder = divmod(remainder, constants[field])
     return f.format(fmt, **values)
 
 
+def get_project_charges_filter(prefix="") -> Q:
+    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
+    projects_filter = Q()
+    if projects_to_exclude:
+        projects_filter = Q(**{f"{prefix}project_id__in": projects_to_exclude})
+    if billing_installed():
+        exclude_no_charge = ReportsCustomization.get_bool("reports_exclude_no_charge_projects")
+        if exclude_no_charge:
+            projects_filter |= Q(**{f"{prefix}project__projectbillingdetails__no_charge": True})
+    return projects_filter
+
+
 def get_report_dict():
     dictionary = report_dict
     if billing_installed():
         dictionary.update(billing_reports_dict)
     return dictionary
```

## NEMO_reports/views/reporting_facilily_usage.py

```diff
@@ -109,20 +109,22 @@
                 "details": billable.details,
                 "duration": billable.timedelta,
                 "onsite": not billable.remote,
                 "core_facility": billable.core_facility,
                 "discipline": project.discipline.name if project and project.discipline else "N/A",
                 "account_type": project.account.type.name if project and project.account.type else "N/A",
                 "institution_name": institution.name if institution else "N/A",
-                "institution_type": institution.institution_type.name
-                if institution and institution.institution_type
-                else "N/A",
-                "rate_category": project_billing_details.category.name
-                if project_billing_details and project_billing_details.category
-                else "N/A",
+                "institution_type": (
+                    institution.institution_type.name if institution and institution.institution_type else "N/A"
+                ),
+                "rate_category": (
+                    project_billing_details.category.name
+                    if project_billing_details and project_billing_details.category
+                    else "N/A"
+                ),
             }
             data.add_row(data_row)
         data.rows.sort(key=lambda x: x["end"])
 
     summary = SummaryDisplayTable()
     summary.add_header(("item", "Item"))
     summary.add_row({"item": "Facility usage"})
```

## NEMO_reports/views/reporting_invoice_charges.py

```diff
@@ -14,22 +14,22 @@
 from NEMO_billing.models import CoreFacility, InstitutionType, Institution
 from NEMO_billing.rates.models import RateCategory
 from django.db.models import Case, OuterRef, QuerySet, Subquery, Sum, When
 from django.http import HttpRequest
 from django.shortcuts import render
 from django.views.decorators.http import require_GET
 
-from NEMO_reports.customizations import ReportsCustomization
 from NEMO.decorators import accounting_or_manager_required
 from NEMO_reports.views.reporting import (
     DataDisplayTable,
     ReportingParameters,
     SummaryDisplayTable,
     get_month_range,
     get_monthly_rule,
+    get_project_charges_filter,
     report_export,
     reporting_dictionary,
 )
 
 
 @accounting_or_manager_required
 @require_GET
@@ -236,18 +236,16 @@
     # summary.rows[current_row][summary_key] = remote_amount
     # current_row += 1
     # onsite_amount, onsite_items = get_invoice_items(params, start, end, Q(remote=False))
     # summary.rows[current_row][summary_key] = onsite_amount
 
 
 def get_invoice_query_set(start: datetime.datetime, end: datetime.datetime) -> QuerySet[Invoice]:
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
     query = Invoice.objects.filter(voided_date__isnull=True, start__gte=start, start__lte=end)
-    if projects_to_exclude:
-        query = query.exclude(project_details__project_id__in=projects_to_exclude)
+    query = query.exclude(get_project_charges_filter("project_details__"))
     return query
 
 
 def invoice_tax(invoice) -> Decimal:
     return invoice.invoicesummaryitem_set.aggregate(
         total_tax=Coalesce(
             Sum(
```

## NEMO_reports/views/reporting_invoice_item_charges.py

```diff
@@ -15,25 +15,25 @@
     UsageEvent,
 )
 from NEMO_billing.invoices.models import BillableItemType, InvoiceDetailItem
 from django.db.models import BooleanField, Case, OuterRef, Q, QuerySet, Sum, Value, When
 from django.shortcuts import render
 from django.views.decorators.http import require_GET
 
-from NEMO_reports.customizations import ReportsCustomization
 from NEMO.decorators import accounting_or_manager_required
 from NEMO_reports.views.reporting import (
     ACTIVITIES_PARAMETER_LIST,
     DEFAULT_PARAMETER_LIST,
     DataDisplayTable,
     ReportingParameters,
     SummaryDisplayTable,
     get_core_facility,
     get_month_range,
     get_monthly_rule,
+    get_project_charges_filter,
     get_rate_category,
     report_export,
     reporting_dictionary,
 )
 
 
 @accounting_or_manager_required
@@ -99,17 +99,19 @@
                 "discount": item.discount,
                 "amount": item.amount,
                 "onsite": not item.remote,
                 "core_facility": item.core_facility or "N/A",
                 "discipline": project.discipline.name if project and project.discipline else "N/A",
                 "account_type": project.account.type.name if project and project.account.type else "N/A",
                 "institution_name": project_details.institution.name if project_details.institution else "N/A",
-                "institution_type": project_details.institution.institution_type.name
-                if project_details.institution and project_details.institution.institution_type
-                else "N/A",
+                "institution_type": (
+                    project_details.institution.institution_type.name
+                    if project_details.institution and project_details.institution.institution_type
+                    else "N/A"
+                ),
             }
             if RateCategory and RateCategory.objects.exists():
                 data_row["rate_category"] = project.projectbillingdetails.category.name if project else "N/A"
             data.add_row(data_row)
         data.rows.sort(key=lambda x: x["end"])
 
     summary = SummaryDisplayTable()
@@ -240,17 +242,15 @@
 
 def get_invoice_items(
     params, start: datetime.datetime, end: datetime.datetime, extra_filter=None, total_include_discounts=True
 ) -> (Decimal, QuerySet[InvoiceDetailItem]):
     total_amount = Decimal(0)
     items = InvoiceDetailItem.objects.none()
     items_qs = InvoiceDetailItem.objects.all().filter(invoice__voided_date__isnull=True)
-    projects_to_exclude = ReportsCustomization.get_list_int("reports_exclude_projects")
-    if projects_to_exclude:
-        items_qs = items_qs.exclude(invoice__project_details__project_id__in=projects_to_exclude)
+    items_qs = items_qs.exclude(get_project_charges_filter())
     if params.get_bool("tool_usage", "on"):
         tool_usages = items_qs.filter(
             end__date__gte=start, end__date__lte=end, item_type=BillableItemType.TOOL_USAGE.value
         ).annotate(
             remote=Case(
                 When(
                     object_id__in=UsageEvent.objects.filter(pk=OuterRef("object_id"), remote_work=False).values_list(
```

## NEMO_reports/views/reporting_new_user_activities.py

```diff
@@ -29,14 +29,15 @@
     SummaryDisplayTable,
     billing_installed,
     get_core_facility,
     get_institution,
     get_institution_type,
     get_month_range,
     get_monthly_rule,
+    get_project_charges_filter,
     get_rate_category,
     report_export,
     reporting_dictionary,
 )
 
 
 @accounting_or_manager_required
@@ -272,14 +273,15 @@
             "_institution_name",
             "_institution_type",
         ]:
             base_empty_annotations[first_type + first_type_property] = Value(None, output_field=CharField())
     users = users.annotate(**base_empty_annotations)
     if params.get_bool("tool_usage", "on"):
         first_usage_sub = UsageEvent.objects.filter(user=OuterRef("pk"))
+        first_usage_sub = first_usage_sub.exclude(get_project_charges_filter())
         if during_date_range:
             first_usage_sub = first_usage_sub.filter(start__gte=origin_start_datetime)
         first_usage_sub = first_usage_sub.order_by("start")
         users = users.annotate(
             first_tool_usage=Subquery(first_usage_sub.values("start")[:1]),
             first_tool_usage_project=Subquery(first_usage_sub.values("project__name")[:1]),
             first_tool_usage_discipline=Subquery(first_usage_sub.values("project__discipline__name")[:1]),
@@ -298,14 +300,15 @@
                 ),
                 first_tool_usage_institution_type=Subquery(
                     first_usage_sub.values("project__projectbillingdetails__institution__institution_type__name")[:1]
                 ),
             )
     if params.get_bool("area_access", "on"):
         first_access_sub = AreaAccessRecord.objects.filter(customer=OuterRef("pk"))
+        first_access_sub = first_access_sub.exclude(get_project_charges_filter())
         if during_date_range:
             first_access_sub = first_access_sub.filter(start__gte=origin_start_datetime)
         first_access_sub = first_access_sub.order_by("start")
         users = users.annotate(
             first_area_access=Subquery(first_access_sub.values("start")[:1]),
             first_area_access_project=Subquery(first_access_sub.values("project__name")[:1]),
             first_area_access_discipline=Subquery(first_access_sub.values("project__discipline__name")[:1]),
@@ -324,14 +327,15 @@
                 ),
                 first_area_access_institution_type=Subquery(
                     first_access_sub.values("project__projectbillingdetails__institution__institution_type__name")[:1]
                 ),
             )
     if params.get_bool("staff_charges", "on"):
         first_staff_charge_sub = StaffCharge.objects.filter(customer=OuterRef("pk"))
+        first_staff_charge_sub = first_staff_charge_sub.exclude(get_project_charges_filter())
         if during_date_range:
             first_staff_charge_sub = first_staff_charge_sub.filter(start__gte=origin_start_datetime)
         first_staff_charge_sub = first_staff_charge_sub.order_by("start")
         users = users.annotate(
             first_staff_charge=Subquery(first_staff_charge_sub.values("start")[:1]),
             first_staff_charge_project=Subquery(first_staff_charge_sub.values("project__name")[:1]),
             first_staff_charge_discipline=Subquery(first_staff_charge_sub.values("project__discipline__name")[:1]),
@@ -352,14 +356,15 @@
                     first_staff_charge_sub.values(
                         "project__projectbillingdetails__institution__institution_type__name"
                     )[:1]
                 ),
             )
     if params.get_bool("training", "on"):
         first_training_sub = TrainingSession.objects.filter(trainee=OuterRef("pk"))
+        first_training_sub = first_training_sub.exclude(get_project_charges_filter())
         if during_date_range:
             first_training_sub = first_training_sub.filter(date__gte=origin_start_datetime)
         first_training_sub = first_training_sub.order_by("date")
         users = users.annotate(
             first_training=Subquery(first_training_sub.values("date")[:1]),
             first_training_project=Subquery(first_training_sub.values("project__name")[:1]),
             first_training_discipline=Subquery(first_training_sub.values("project__discipline__name")[:1]),
@@ -378,14 +383,15 @@
                 ),
                 first_training_institution_type=Subquery(
                     first_training_sub.values("project__projectbillingdetails__institution__institution_type__name")[:1]
                 ),
             )
     if params.get_bool("missed_reservations", "on"):
         first_missed_sub = Reservation.objects.filter(missed=True, user=OuterRef("pk"))
+        first_missed_sub = first_missed_sub.exclude(get_project_charges_filter())
         if during_date_range:
             first_missed_sub = first_missed_sub.filter(start__gte=origin_start_datetime)
         first_missed_sub = first_missed_sub.order_by("start")
         users = users.annotate(
             first_missed_reservation=Subquery(first_missed_sub.order_by("start").values("start")[:1]),
             first_missed_reservation_project=Subquery(first_missed_sub.values("project__name")[:1]),
             first_missed_reservation_discipline=Subquery(first_missed_sub.values("project__discipline__name")[:1]),
@@ -401,14 +407,15 @@
                 ),
                 first_missed_reservation_institution_type=Subquery(
                     first_missed_sub.values("project__projectbillingdetails__institution__institution_type__name")[:1]
                 ),
             )
     if params.get_bool("consumables", "on"):
         first_consumable_sub = ConsumableWithdraw.objects.filter(customer=OuterRef("pk"))
+        first_consumable_sub = first_consumable_sub.exclude(get_project_charges_filter())
         if during_date_range:
             first_consumable_sub = first_consumable_sub.filter(date__gte=origin_start_datetime)
         first_consumable_sub = first_consumable_sub.order_by("date")
         users = users.annotate(
             first_consumable_withdrawal=Subquery(first_consumable_sub.values("date")[:1]),
             first_consumable_withdrawal_project=Subquery(first_consumable_sub.values("project__name")[:1]),
             first_consumable_withdrawal_discipline=Subquery(
@@ -436,14 +443,15 @@
                 ),
             )
     if billing_installed():
         from NEMO_billing.models import CustomCharge
 
         if params.get_bool("custom_charges", "on"):
             first_custom_sub = CustomCharge.objects.filter(customer=OuterRef("pk"))
+            first_custom_sub = first_custom_sub.exclude(get_project_charges_filter())
             if during_date_range:
                 first_custom_sub = first_custom_sub.filter(date__gte=origin_start_datetime)
             first_custom_sub = first_custom_sub.order_by("date")
             users = users.annotate(
                 first_custom_charge=Subquery(first_custom_sub.values("date")[:1]),
                 first_custom_charge_project=Subquery(first_custom_sub.values("project__name")[:1]),
                 first_custom_charge_discipline=Subquery(first_custom_sub.values("project__discipline__name")[:1]),
```

## NEMO_reports/views/reporting_unique_user_prj_acc.py

```diff
@@ -187,17 +187,15 @@
     else:
         summary.add_header(("value", "Value"))
         add_summary_info(params, summary, start, end, combination)
 
     report_key = (
         "unique_user_project"
         if combination == "project_id"
-        else "unique_user_account"
-        if combination
-        else "unique_users"
+        else "unique_user_account" if combination else "unique_users"
     )
     if params.get_bool("export"):
         return report_export([summary, data], report_key, start, end)
     dictionary = {
         "data": data,
         "summary": summary,
     }
```

## Comparing `NEMO_reports-1.7.1.dist-info/LICENSE` & `NEMO_reports-1.7.2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `NEMO_reports-1.7.1.dist-info/METADATA` & `NEMO_reports-1.7.2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: NEMO-reports
-Version: 1.7.1
+Version: 1.7.2
 Summary: Reports plugin for NEMO
 Home-page: https://gitlab.com/nemo-community/atlantis-labs/nemo-reports
 Author: Atlantis Labs LLC
 Author-email: atlantis@atlantislabs.io
 License: MIT
 Keywords: NEMO
 Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `NEMO_reports-1.7.1.dist-info/RECORD` & `NEMO_reports-1.7.2.dist-info/RECORD`

 * *Files 22% similar despite different names*

```diff
@@ -1,29 +1,29 @@
 NEMO_reports/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_reports/app_settings.py,sha256=3uw9TvMBQfxlnRegGbCOGR4mkfUG8o7zxE5IbmYpkOo,41
 NEMO_reports/apps.py,sha256=c-Z_5mWDOIEFwV1pp7Q1E4W6aLuEzGHqyXHHF04z6iM,486
-NEMO_reports/customizations.py,sha256=nkwjGoskFHMlxsUbkZWQVukjR0r1Ob60ChnnkHyBHIk,1682
+NEMO_reports/customizations.py,sha256=n9wN2zsxnIHKVkj6GKWDbqPtQkUpn24nbnd5YhWsYAc,1732
 NEMO_reports/urls.py,sha256=VYCjNJiGny4DFnScJu542XtZQ4M0ZAUrN7gUrUMD7jM,1620
 NEMO_reports/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_reports/static/NEMO_reports/NEMO_reports.css,sha256=H33WpNNP5RylVlaIldjgNCrYj5U9J4zGS6IPkf6NvMU,243
 NEMO_reports/static/NEMO_reports/daterangepicker.css,sha256=9e9MfmRHWQmp4yMV-R9cxXU6-ZjzB2x-YcE4Z1Kmuag,7659
 NEMO_reports/static/NEMO_reports/daterangepicker.js,sha256=nCVry5qhDvfmuraDoHeq7bv91trY3tpPHnq_T3_hBOw,66305
-NEMO_reports/templates/NEMO_reports/report_active_users.html,sha256=jFVUcsuN_ozZqHIadAKP63va2XvXedr0CKtreBb29Fk,2346
-NEMO_reports/templates/NEMO_reports/report_base.html,sha256=FB5haqibYUWeRG16673Lu4MpKcJLD93DqiGMMcSpNJU,7103
-NEMO_reports/templates/NEMO_reports/report_facility_usage.html,sha256=-ke3mby-kGg8SHnK7VleUCRHmoPqCOf_pcS6zzD4pio,1703
-NEMO_reports/templates/NEMO_reports/report_new_users.html,sha256=TmsIKthOyJRytLUFZq2CSz4XBcPwfRKw_MrGPyRERew,2782
-NEMO_reports/templates/NEMO_reports/reports.html,sha256=-8-J_Ld7S5eGMWwtlPIMtI4AeDtQ2SzIH4oOreXUEUA,908
-NEMO_reports/templates/base/navbar.html,sha256=-r_TqMvfjsMOXJvTkPvZrTe_b0bqdarQ_9SJYo6kmDk,269
-NEMO_reports/templates/base/navbar_reports.html,sha256=KyMt2s8m9qg2GrRAjWuiFYvKTaTqiieBTUie-4eNDc4,138
-NEMO_reports/templates/customizations/customizations_reports.html,sha256=HGSiexm3hFQ6Xz1a8rYLTchKskDXc8RQj8OBb0mqG74,4688
+NEMO_reports/templates/NEMO_reports/report_active_users.html,sha256=_FKiR0hHrDso3mEz9VvG2xTWYwoLj7S2wLyh2KTp7Ps,3603
+NEMO_reports/templates/NEMO_reports/report_base.html,sha256=GVXBftw3Y_gMt8qtXmQYcVPpHK7Gh7z3Q21DtQwwB58,9524
+NEMO_reports/templates/NEMO_reports/report_facility_usage.html,sha256=LhQLkYKT1h5Ez57M6YHKh2DHPiJE5xHvnv0fNripFyU,2557
+NEMO_reports/templates/NEMO_reports/report_new_users.html,sha256=qiwgHL08t4eFbV2wSxn6zjpaaibZMbLriO4mgE0LqgI,4174
+NEMO_reports/templates/NEMO_reports/reports.html,sha256=UM40R3zmj1piL1TP6TUjCQMbQCHxZWxf_uN69ARXq1c,1049
+NEMO_reports/templates/base/navbar.html,sha256=-0IToNIgmOlOWAu2azUdyngoPLx-5MEEDKT5h4DoC1c,287
+NEMO_reports/templates/base/navbar_reports.html,sha256=FynP1L24rtkJBSuwcv198wjNlM0CmmH_j1XZyrTOHgw,139
+NEMO_reports/templates/customizations/customizations_reports.html,sha256=DScmXeQU_6rMrSyFRfkSCdn89SVAgILWecPKo85euYg,7129
 NEMO_reports/views/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-NEMO_reports/views/reporting.py,sha256=WyXROJblxIWKT24q6UxreEhYUgmAOAmKkmLoVHyKnZI,18987
-NEMO_reports/views/reporting_facilily_usage.py,sha256=4MvHTjN33N3UBnotB3aVL4eNVsBRF1dVG992jJi0jf4,15017
-NEMO_reports/views/reporting_invoice_charges.py,sha256=SZxcs1pI7LN3rncgoo7wWCC6HEj4PHz-6BXhsfG6m64,12381
-NEMO_reports/views/reporting_invoice_item_charges.py,sha256=W7XHWIAgCEXnETgizj272VJgISNNKzqWRC9RtNiz4Rg,16324
-NEMO_reports/views/reporting_new_user_activities.py,sha256=75wA9c_LABxN8u7BE_2jgKeWznUDRf2WL8xB3uA0Row,24248
-NEMO_reports/views/reporting_unique_user_prj_acc.py,sha256=fJUCt2L18IEAg1jA9I7LBifkMj59pF8qzUTbmzsrxpc,15375
-NEMO_reports-1.7.1.dist-info/LICENSE,sha256=wFCCmLGvBMU6-W_0h08WYEs3cFtVstutDmY5AzKppQc,1074
-NEMO_reports-1.7.1.dist-info/METADATA,sha256=3x5efryKKIDJMj2uLxWHEngDEo7ePCuSmEWzowP6WhE,2116
-NEMO_reports-1.7.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-NEMO_reports-1.7.1.dist-info/top_level.txt,sha256=6Sq8v68WbH9DkCJMuHLlx3cf2SXldad5VA_yGcd1Xl4,13
-NEMO_reports-1.7.1.dist-info/RECORD,,
+NEMO_reports/views/reporting.py,sha256=jMMkIWwXIU3ycd6LdfonXpdNTMIpVLH27AOmoiweljY,18658
+NEMO_reports/views/reporting_facilily_usage.py,sha256=DTT8WQq0Wj9CPAGvRyZZvCrhmbqn5Qd0Hu7LIr-5Ka4,15073
+NEMO_reports/views/reporting_invoice_charges.py,sha256=44e8dWUYNKJiX4ltRa8lb3DWsGh8lEncEPDH-bbyolA,12228
+NEMO_reports/views/reporting_invoice_item_charges.py,sha256=7rt4TRZUNyf4Xvg8xIAteXqesRNlYUadM8yo6FVtTN0,16191
+NEMO_reports/views/reporting_new_user_activities.py,sha256=VrqMmic2qFYsfxLtIoNE7GCBrU_aLEdrbyqKSURTDsw,24880
+NEMO_reports/views/reporting_unique_user_prj_acc.py,sha256=eiJsKAktxYD-Ndyhdx5LVFcrQrnayK17vmJbkBXE2-E,15359
+NEMO_reports-1.7.2.dist-info/LICENSE,sha256=wFCCmLGvBMU6-W_0h08WYEs3cFtVstutDmY5AzKppQc,1074
+NEMO_reports-1.7.2.dist-info/METADATA,sha256=DZxwBcq-_Ajy7l66dhLSL08vEN_n-_42ALqoLvbE2eM,2116
+NEMO_reports-1.7.2.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+NEMO_reports-1.7.2.dist-info/top_level.txt,sha256=6Sq8v68WbH9DkCJMuHLlx3cf2SXldad5VA_yGcd1Xl4,13
+NEMO_reports-1.7.2.dist-info/RECORD,,
```

